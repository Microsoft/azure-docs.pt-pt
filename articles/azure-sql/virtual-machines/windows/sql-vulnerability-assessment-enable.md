---
title: Avaliação de vulnerabilidade SQL para servidor SQL em VMs Azure
description: Descreve a Avaliação de Vulnerabilidade SQL para bases de dados do SQL Server em execução em Máquinas Virtuais Azure.
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.subservice: security
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 817203b8e795ce15c8c48c18bc7b9a46217dc93a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/19/2021
ms.locfileid: "97356729"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Avaliação de vulnerabilidade SQL para servidor SQL em VMs Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

A SQL Vulnerability Assessment (VA) é um serviço de fácil configuração que pode descobrir, rastrear e ajudá-lo a remediar potenciais vulnerabilidades de base de dados. Utilize-o para melhorar proativamente a segurança da sua base de dados para o seu SQL Server em VMs Azure. 

A Avaliação de Vulnerabilidades faz parte da oferta do [Azure Defender para a oferta SQL,](../../database/azure-defender-for-sql.md) que é um pacote unificado para capacidades avançadas de segurança SQL. A Avaliação de Vulnerabilidade pode ser acedida e gerida através do Azure Defender central para o portal SQL ou através do Centro de Segurança Azure. 

## <a name="overview"></a>Descrição geral

SQL Vulnerability Assessment (VA) é um serviço que proporciona visibilidade ao seu estado de segurança. A Avaliação de Vulnerabilidades inclui medidas accuáveis para resolver problemas de segurança e melhorar a segurança da sua base de dados. Pode ajudá-lo: 

- Satisfaça os requisitos de conformidade que requerem relatórios de verificação de bases de dados. 
- Cumpra os padrões de privacidade dos dados. 
- Monitorize um ambiente dinâmico de base de dados onde as mudanças são difíceis de rastrear. 

A Avaliação de Vulnerabilidades é um serviço de digitalização que emprega uma base de conhecimento de regras que sinalizam vulnerabilidades de segurança. Destaca desvios das melhores práticas, tais como configurações erradas, permissões excessivas e dados sensíveis desprotegidos. 

As regras baseiam-se nas melhores práticas da Microsoft e focam-se nos problemas de segurança que apresentam os maiores riscos para a sua base de dados e os seus dados valiosos. Cobrem problemas de nível de base de dados e problemas de segurança ao nível do servidor, como definições de firewall de servidor e permissões de nível de servidor. Estas regras representam também muitos dos requisitos de várias entidades reguladoras para cumprirem as suas normas de conformidade. 

Os resultados da digitalização incluem passos acccáveis para resolver cada problema e fornecer scripts de remediação personalizados, quando aplicável. Pode personalizar um relatório de avaliação para o seu ambiente definindo uma linha de base aceitável para: 

- Configurações de permissão 
- Configurações de recursos 
- Definições de base de dados 

## <a name="enable-sql-va"></a>Ativar SQL VA

Ativar o Azure Defender para servidores SQL em máquinas para implementar a Avaliação de Vulnerabilidade. 

Para utilizar o Azure Defender para o SQL Server, siga estes passos:

1. [Instale a extensão do agente SQL IaaS](sql-agent-extension-manually-register-single-vm.md)
1. [Permitir o provisionamento automático do agente Log Analytics](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [Ativar o plano opcional do Centro de Segurança](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

Uma vez que a Avaliação de Vulnerabilidade faz parte do Azure Defender para o SQL, uma vez que o Azure Defender está ativado na sua máquina virtual, as suas bases de dados são automaticamente digitalizadas a cada 12 horas para identificar vulnerabilidades de segurança. Os resultados são enviados para o Azure Security Center para uma visão agregada centralizada da propriedade de dados SQL protegida pelo Azure Defender para o SQL. 

> [!NOTE]
> A varredura é leve, segura, leva apenas alguns segundos por base de dados para ser executada e é inteiramente apenas de leitura. Não altera a sua base de dados. 

## <a name="view-report"></a>View report

O relatório da base de dados apresenta uma visão geral do seu estado de segurança. Ele enumera quantas questões foram encontradas e as respetivas severidades. Os resultados incluem avisos sobre desvios das melhores práticas e uma imagem das suas definições relacionadas com a segurança, tais como principais e funções de base de dados e as suas permissões associadas.  

Para ver o relatório, siga estes passos:

1. Vá ao [Centro de Segurança Azure](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) no portal Azure.
1. Selecione **Recomendações** no menu **geral:** 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="Ir às recomendações em definições no Centro de Segurança Azure a partir do portal Azure":::

1. Percorra as recomendações e expanda as **vulnerabilidades do Remediate**.
1. Escolha **os resultados da avaliação da vulnerabilidade nos seus servidores SQL em máquinas deve ser remediado**. 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="Veja o relatório na lâmina de recomendação do Centro de Segurança Azure":::

Esta página apresenta um agregado de vulnerabilidades de segurança identificadas para todos os VMs do Servidor SQL na subscrição. 


## <a name="analyze-results"></a>Analisar resultados

Reveja os seus resultados e identifique as conclusões do relatório que são verdadeiras questões de segurança no seu ambiente. Aprofundar para cada resultado falhado para entender o impacto da descoberta e por que cada verificação de segurança falhou.  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="Reveja os seus resultados e identifique as conclusões do relatório que são verdadeiras questões de segurança no seu ambiente.":::

## <a name="set-baseline"></a>Definir linha de base 

Ao rever os resultados da sua avaliação, pode marcar os resultados como sendo uma linha de base aceitável no seu ambiente. A linha de base é essencialmente uma personalização de como os resultados são relatados. Os resultados que correspondem à linha de base são considerados como passando em exames subsequentes. Depois de estabelecer o seu estado de segurança de base, a Avaliação de Vulnerabilidade apenas reporta desvios da linha de base. Desta forma, pode concentrar a sua atenção nas questões relevantes. 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="Ao rever os resultados da sua avaliação, pode marcar os resultados como sendo uma linha de base aceitável no seu ambiente.":::

## <a name="export-results"></a>Exportar resultados

Utilize a funcionalidade de [exportação contínua](../../../security-center/continuous-export.md) do Centro de Segurança Azure para exportar resultados de avaliação de vulnerabilidades para o Azure Event Hub ou para log analytics workspace. 


## <a name="next-steps"></a>Passos seguintes

Para saber mais, consulte a [SQL Vulnerability Assessment in Azure SQL,](../../database/sql-vulnerability-assessment.md)e [defender os seus dados SQL utilizando o Azure Security Center](../../../security-center/security-center-introduction.md).

