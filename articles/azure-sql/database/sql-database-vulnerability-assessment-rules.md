---
title: Guia de referência das regras de avaliação de vulnerabilidades do SQL
description: Lista de títulos e descrições de regras para SQL Server, Azure SQL Database, Azure SQL Managed Instance e Azure Synapse Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 05/08/2020
ms.openlocfilehash: 71ba817f8df086ed8723532dd50d991386b68a03
ms.sourcegitcommit: 3fc3457b5a6d5773323237f6a06ccfb6955bfb2d
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 09/11/2020
ms.locfileid: "90033239"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Guia de referência das regras de avaliação de vulnerabilidades do SQL
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

Este artigo enumera o conjunto de regras incorporadas que são usadas para sinalizar vulnerabilidades de segurança e destacar desvios das melhores práticas, tais como erros deconfiguações, permissões excessivas e dados sensíveis desprotegidos. As regras baseiam-se nas melhores práticas da Microsoft e focam-se nos problemas de segurança que apresentam os maiores riscos para a sua base de dados e os seus dados valiosos. Cobrem tanto problemas de nível de base como problemas de segurança ao nível do servidor, como definições de firewall de servidor e permissões de nível de servidor. Estas regras representam também muitos dos requisitos de várias entidades reguladoras para cumprirem as suas normas de conformidade.

As regras apresentadas na sua base de dados dependem da versão e plataforma SQL que foram digitalizadas. 

Para saber como implementar a Avaliação de Vulnerabilidade em Azure, consulte [a Avaliação de Vulnerabilidade de Implementação.](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment#implement-vulnerability-assessment)

## <a name="rules"></a>Regras

|ID da Regra  |Título de Regra  |Categoria regra  |Severidade da Regra  |Descrição da regra  |Plataforma  |
|---------|---------|---------|---------|---------|---------|
| VA1017     |Executar permissões sobre xp_cmdshell de todos os utilizadores (exceto dbo) deve ser revogado         |Autenticação e Autorização         |Alto         |O procedimento xp_cmdshell prolongado armazenado gera uma concha de comando Windows         |<nobr>SQL Server 2012+<sup>1</sup><nobr/>         |
| VA1018     |As últimas atualizações devem ser instaladas         |Atualizações e patches de instalação         |Alto         |A Microsoft lança periodicamente Atualizações Cumulativas (CUs) para cada versão do SQL Server. Esta regra verifica se a mais recente CU foi instalada para a versão específica do SQL Server a ser utilizada, passando numa cadeia para execução. Esta regra verifica se todos os utilizadores (exceto dbo) não têm permissão para executar o xp_cmdshell procedimento armazenado alargado. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA1020     |O utilizador da base de dados GUEST não deve ser membro de qualquer papel         |Autenticação e Autorização         |Alto         |O utilizador convidado permite o acesso a uma base de dados para quaisquer logins que não estejam mapeados para um utilizador de base de dados específico. Esta regra verifica se não são atribuídas funções de base de dados ao utilizador Convidado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1021     |Os procedimentos globais de armazenação temporária devem ser removidos         |Proteção de Dados         |Alto         |Um procedimento global de armazenação temporária é visível para todas as sessões e é abandonado quando a sessão do utilizador que o criou está fechada. Esta regra verifica que não existem procedimentos globais armazenados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1022     |Consultas distribuídas ad hoc devem ser desativadas         |Redução da Área da Superfície         |Médio         |Consultas distribuídas ad hoc usam as `OPENROWSET` `OPENDATASOURCE` e funções para ligar a fontes de dados remotas que usam OLE DB. Esta regra verifica se as consultas distribuídas ad hoc estão desativadas.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1023     |CLR deve ser desativado         |Redução da Área da Superfície         |Alto         |O CLR permite que o código gerido seja hospedado e executado no ambiente do Microsoft SQL Server. Esta regra verifica se o CLR está desativado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1026     |CLR deve ser desativado         |Redução da Área da Superfície         |Médio         |O CLR permite que o código gerido seja hospedado e executado no ambiente do Microsoft SQL Server. A segurança rigorosa da CLR trata os conjuntos SAFE e EXTERNAL_ACCESS como se estivessem marcados INSEGUROS e exige que todos os conjuntos sejam assinados por um certificado ou chave assimétrica com um login correspondente que tenha sido concedida permissão de MONTAGEM INSEGURA na base de dados principal. Esta regra verifica se o CLR está desativado.         |<nobr>SQL Server 2017+<sup>2</sup><nobr/><br/><br/>Instância Gerida do SQL         |
|VA1027     |Conjuntos de confiança não rastreadas devem ser removidos         |Redução da Área da Superfície         |Alto         |Os conjuntos marcados como INSEGUROs devem ser assinados por um certificado ou chave assimétrica com um login correspondente que tenha sido concedida permissão DE MONTAGEM INSEGURA na base de dados principal. Conjuntos fidedignos podem contornar este requisito.          |<nobr>SQL Server 2017+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1042     |O acorrentamento da propriedade da base de dados deve ser desativado para todas as bases de dados, com exceção `master` `msdb` de , e `tempdb`         |Autenticação e Autorização         |Alto         |O acorrentamento da propriedade da base de dados cruzada é uma extensão da corrente de propriedade, exceto que atravessa o limite da base de dados. Esta regra verifica se esta opção é desativada para todas as bases de dados, com exceção `master` `msdb` de , e `tempdb` . Para `master` `msdb` , e , a corrente de propriedade da `tempdb` base de dados cruzada é ativada por padrão.        |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1043     |O PRINCIPAL CONVIDADO não deve ter acesso a nenhuma base de dados de utilizadores         |Autenticação e Autorização         |Médio         |O utilizador convidado permite o acesso a uma base de dados para quaisquer logins que não estejam mapeados para um utilizador de base de dados específico. Esta regra verifica se o utilizador convidado não pode ligar-se a nenhuma base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1044     |As ligações de administração remota devem ser desativadas         |Redução da Área da Superfície         |Médio         |O SQL Server fornece uma ligação de administrador dedicada (DAC). O DAC permite que um administrador aceda a um servidor em execução para executar funções de diagnóstico ou declarações De Transact-SQL ou para resolver problemas no servidor. Esta regra verifica se as ligações de administração dedicadas remotas são desativadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1045     |Os vestígios predefinidos devem ser ativados         |Auditoria e Registo         |Médio         |O rastreio predefinido fornece assistência de resolução de problemas aos administradores de bases de dados, garantindo que eles têm os dados de registo necessários para diagnosticar problemas na primeira vez que ocorrem. Esta regra verifica se o rastreio predefinido está ativado.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1046     |CHECK_POLICY deve ser ativado para todos os logins SQL         |Autenticação e Autorização         |Baixa         |CHECK_POLICY opção permite verificar os logins do SQL contra a política de domínio. Esta regra verifica se CHECK_POLICY opção está ativada para todos os logins SQL.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1047     |O controlo de expiração da palavra-passe deve ser ativado para todos os logins do SQL         |Autenticação e Autorização         |Baixa         |As políticas de validade da palavra-passe são usadas para gerir o tempo de vida útil de uma palavra-passe. Quando o SQL Server aplica a política de expiração da palavra-passe, os utilizadores são lembrados a alterar senhas antigas e as contas que tenham expirado as palavras-passe são desativadas. Esta regra verifica se a política de expiração da palavra-passe está ativada para todos os logins SQL.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1048     |Os principais da base de dados não devem ser mapeados na `sa` conta         |Autenticação e Autorização         |Alto         |Um principal de base de dados que é mapeado para a `sa` conta pode ser explorado por um intruso para elevar permissões para `sysadmin`         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1051     |AUTO_CLOSE deve ser desativado em todas as bases de dados         |Redução da Área da Superfície         |Médio         |A opção AUTO_CLOSE especifica se a base de dados desliga de forma limpa e liberta recursos após a saída do último utilizador. Esta regra verifica se esta opção está desativada em todas as bases de dados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1052     |Remover BUILTIN\Administradores como login de servidor         |Autenticação e Autorização         |Baixa         |O grupo BUILTIN\Administrators contém o grupo de administradores locais do Windows. Nas versões mais antigas do Microsoft SQL Server este grupo tem direitos de administrador por padrão. Esta regra verifica se este grupo é removido do SQL Server.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1053     |Conta com nome predefinido `sa` deve ser renomeada ou desativada         |Autenticação e Autorização         |Baixa         |`sa` é uma conta bem conhecida com iD principal 1. Esta regra verifica que a `sa` conta é renomeada ou desativada         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1054     |Não devem ser concedidas autorizações excessivas ao papel do PÚBLICO em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada login do SQL Server pertence à função do servidor público. Quando um titular do servidor não tiver sido concedido ou negado permissões específicas num objeto securável, o utilizador herda as permissões concedidas ao público nesse objeto. Esta regra apresenta uma lista de todos os objetos ou colunas que estejam acessíveis a todos os utilizadores através da função PÚBLICA.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1058     |`sa` login deve ser desativado         |Autenticação e Autorização         |Alto         |`sa` é uma conta bem conhecida com iD principal 1. Esta regra verifica que a `sa` conta está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1059     |xp_cmdshell deve ser desativado         |Autenticação e Autorização         |Alto         |xp_cmdshell desova uma concha de comando do Windows e passa-lhe uma corda para execução. Esta regra verifica se xp_cmdshell está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1066     |Os pontos finais do corretor de serviço não reutilizado devem ser removidos         |Redução da Área da Superfície         |Baixa         |O Corretor de Serviços fornece mensagens de fila e fiáveis para o SQL Server. O Corretor de Serviços é utilizado tanto para aplicações que utilizam uma única instância sql server e aplicações que distribuem o trabalho em várias instâncias. Os pontos finais do Corretor de Serviços fornecem opções para a segurança do transporte e encaminhamento de mensagens. Esta regra enumera todos os pontos finais do corretor de serviços. Retire os que não são utilizados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1067     |Os XPs de Correio de Base de Dados devem ser desativados         |Autenticação e Autorização         |Médio         |Database Mail é uma solução empresarial para o envio de mensagens de correio eletrónico do SQL Server.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1068     |As permissões do servidor não devem ser concedidas diretamente aos principais         |Autenticação e Autorização         |Baixa         |As permissões de nível do servidor estão associadas a um objeto de nível de servidor para regular quais os utilizadores que podem ter acesso ao objeto. Esta regra verifica se não existem permissões de nível de servidor concedidas diretamente aos logins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1069     |As permissões para selecionar a partir de tabelas e vistas do sistema devem ser revogadas de não-sysadmins         |Autenticação e Autorização         |Baixa         |As permissões não-sysadmin para selecionar a partir de tabelas e vistas do sistema existem fora da caixa e são normalmente usadas por ferramentas como SSMS. Esta regra enumera quais as tabelas e vistas do sistema que podem ser acedidas por não-sysadmins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1070     |Os utilizadores da base de dados não devem partilhar o mesmo nome que um login de servidor         |Autenticação e Autorização         |Baixa         |Os utilizadores da base de dados podem partilhar o mesmo nome que um login do servidor. Esta regra valida que não existem tais utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1071     |A opção 'Scan for startup stored procedures' deve ser desativada         |Redução da Área da Superfície         |Médio         |Quando 'Scan for startup procs' é ativado o SQL Server verifica e executa todos os procedimentos armazenados automaticamente definidos no servidor. Se esta opção estiver ativada, o SQL Server verifica e executa todos os procedimentos armazenados automaticamente definidos no servidor. Esta regra verifica se esta opção está desativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1072     |Modo de autenticação deve ser autenticação do Windows         |Autenticação e Autorização         |Médio         |Existem dois possíveis modos de autenticação: modo de autenticação do Windows e modo misto. Modo misto significa que o SQL Server permite a autenticação do Windows e a autenticação do SQL Server. Esta regra verifica se o modo de autenticação está definido para a Autenticação do Windows.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1091     |A auditoria de tentativas de login bem sucedidas e falhadas (rastreamento predefinido) deve ser ativada quando a 'auditoria de login' é configurada para rastrear os logins         |Auditoria e Registo         |Baixa         |A configuração de auditoria do SQL Server Login permite aos administradores rastrear os utilizadores que iniciam sessão em instâncias do SQL Server. Se o utilizador optar por contar com a 'auditoria de login' para rastrear o login dos utilizadores nas instâncias do SQL Server, então é importante capacitá-lo para tentativas de login bem sucedidas e falhadas.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1092     |A instância do SQL Server não deve ser publicitada pelo serviço de navegador do servidor SQL         |Redução da Área da Superfície         |Baixa         |O SQL Server utiliza o serviço sql Server Browser para enumerar instâncias do Motor de Base de Dados instalado no computador. Isto permite que as aplicações do cliente naveguem para um servidor e ajuda os clientes a distinguir entre múltiplas instâncias do Motor de Base de Dados no mesmo computador. Esta regra verifica se o caso SQL está escondido.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1093     |O número máximo de registos de erros deve ser de 12 ou mais         |Auditoria e Registo         |Baixa         |Cada registo de Erro do Servidor SQL terá todas as informações relacionadas com falhas/erros ocorridos desde que o SQL Server foi reiniciado pela última vez ou desde a última vez que reciclou os registos de erros. Esta regra verifica se o número máximo de registos de erros é de 12 ou mais.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1094     |As permissões da base de dados não devem ser concedidas diretamente aos principais         |Autenticação e Autorização         |Baixa         |As permissões são regras associadas a um objeto titular para regular quais os utilizadores que podem ter acesso ao objeto. Esta regra verifica se não existem permissões DB concedidas diretamente aos utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1095     |Autorizações excessivas não devem ser concedidas ao PAPEL         |Autenticação e Autorização         |Médio         |Cada login do SQL Server pertence à função do servidor público. Quando um titular do servidor não tiver sido concedido ou negado permissões específicas num objeto securável, o utilizador herda as permissões concedidas ao público nesse objeto. Isto apresenta uma lista de todas as permissões que são concedidas ao PÚBLICO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1096     |O CONVIDADO Principal não deve ser autorizado na base de dados         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica se todas as permissões foram revogadas do utilizador GUEST.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1097     |CONVIDADO Principal não deve ser concedido permissões em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica se todas as permissões foram revogadas do utilizador GUEST.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1098     |Qualquer ponto final SSB ou Espelhamento existente deve requerer ligação AES         |Proteção de Dados         |Alto         |Os pontos finais de corretor de serviço e de espelhamento suportam diferentes algoritmos de encriptação, incluindo nenhuma encriptação. Esta regra verifica se qualquer ponto final existente requer encriptação AES.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1099     |Utilizador convidado não deve ser concedida permissão em bases de dados securáveis         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica se todas as permissões foram revogadas do utilizador GUEST.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1102     |A parte de confiança deve ser desativada em todas as bases de dados, exceto MSDB         |Redução da Área da Superfície         |Alto         |A propriedade de base de dados trustworthy é usada para indicar se a instância do SQL Server confia na base de dados e nos conteúdos dentro dela. Se esta opção estiver ativada, os módulos de base de dados (por exemplo, funções definidas pelo utilizador ou procedimentos armazenados) que utilizem um contexto de representação podem aceder a recursos fora da base de dados. Esta regra verifica que a parte DE CONFIANÇA é desativada em todas as bases de dados, exceto a MSDB.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1143     |O utilizador 'dbo' não deve ser utilizado para o funcionamento normal do serviço         |Redução da Área da Superfície         |Médio         |O 'dbo' ou proprietário da base de dados é uma conta de utilizador que tem permissões implícitas para realizar todas as atividades na base de dados. Os membros da função do servidor fixo sysadmin são automaticamente mapeados para dbo. Esta regra verifica se o DBO não é a única conta permitida para aceder a esta base de dados. Note que numa base de dados limpa recentemente criada esta regra falhará até que sejam criadas funções adicionais.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1144     |Base de dados modelo só deve ser acessível por 'dbo'         |Redução da Área da Superfície         |Médio         |A base de dados modelo é utilizada como modelo para todas as bases de dados criadas no caso do SQL Server. As modificações efetuadas na base de dados do modelo, tais como o modelo de recuperação do tamanho da base de dados e outras opções de base de dados, são aplicadas em quaisquer bases de dados criadas posteriormente. Esta regra verifica se o DBO é a única conta autorizada a aceder à base de dados do modelo.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1219     |A encriptação transparente de dados deve ser ativada         |Proteção de Dados         |Médio         |A encriptação de dados transparente (TDE) ajuda a proteger contra a ameaça de atividade maliciosa, realizando encriptação em tempo real e desencriptação das cópias de segurança associadas à base de dados e ficheiros de registo de transações "em repouso" sem exigir alterações à aplicação. Esta regra verifica se o TDE está ativado na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1220     |A comunicação de base de dados utilizando o TDS deve ser protegida através de TLS         |Proteção de Dados         |Alto         |O Microsoft SQL Server pode utilizar a Camada de Tomadas Seguras (SSL) ou a Segurança da Camada de Transporte (TLS) para encriptar dados que são transmitidos através de uma rede entre uma instância do SQL Server e uma aplicação do cliente. Esta regra verifica se todas as ligações ao SQL Server são encriptadas através de TLS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1221     |Chaves Simétricas de encriptação de base de dados devem usar algoritmo AES         |Proteção de Dados         |Alto         |O SQL Server utiliza chaves de encriptação para ajudar a proteger credenciais de dados e informações de ligação que são armazenadas numa base de dados do servidor. O SQL Server tem dois tipos de chaves: simétrica e assimétrica. Esta regra verifica se as chaves simétricas de encriptação da base de dados usam algoritmo AES.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1222     |As chaves de encriptação de nível celular devem usar algoritmo AES         |Proteção de Dados         |Alto         |A encriptação de nível celular (CLE) permite-lhe encriptar os seus dados utilizando chaves simétricas e assimétricas. Esta regra verifica se as teclas simétricas de encriptação de nível celular usam algoritmo AES.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1223     |As chaves do certificado devem usar pelo menos 2048 bits         |Proteção de Dados         |Alto         |As chaves de certificado são usadas em RSA e outros algoritmos de encriptação para proteger os dados. Estas teclas têm de ter comprimento suficiente para proteger os dados do utilizador. Esta regra verifica se o comprimento da chave é pelo menos 2048 bits para todos os certificados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1224     |O comprimento das teclas assimétricas deve ser pelo menos 2048 bits         |Proteção de Dados         |Alto         |As chaves assimétricas da base de dados são usadas em muitos algoritmos de encriptação estas chaves precisam de ter comprimento suficiente para proteger os dados encriptados esta regra verifica que todas as chaves assimétricas armazenadas na base de dados têm comprimento de pelo menos 2048 bits         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>Base de Dados SQL         |
|VA1229     |A definição de fluxo de ficheiros no registo e na configuração do SQL Server deve corresponder         |Redução da Área da Superfície         |Alto         |Existem duas definições que regem a opção Filestream uma no registo (nível de SISTEMA) e uma na configuração do SQL Server. Esta regra verifica se as duas definições coincidem.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1230     |O fluxo de ficheiros deve ser desativado         |Redução da Área da Superfície         |Alto         |O FILESTREAM integra o SqL Server Database Engine com um sistema de ficheiros NTFS armazenando dados binários de objetos grandes (BLOB) como ficheiros no sistema de ficheiros. As declarações Transact-SQL podem inserir a atualização de pesquisa de consulta e fazer o back up dados FILESTREAM. Esta regra verifica se o Filestream está desativado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1231     |O fluxo de ficheiros deve ser desativado (SQL)         |Redução da Área da Superfície         |Alto         |O FILESTREAM integra o SqL Server Database Engine com um sistema de ficheiros NTFS armazenando dados binários de objetos grandes (BLOB) como ficheiros no sistema de ficheiros. As declarações Transact-SQL podem inserir a atualização de pesquisa de consulta e fazer o back up dados FILESTREAM. Esta regra verifica se a opção específica do Filestream SQL é desativada         |<nobr>SQL Server 2012+<nobr/>          |
|VA1234     |A definição de critérios comuns deve ser ativada         |Auditoria e Registo         |Baixa         |A definição de critérios comuns permite vários elementos e comportamentos necessários para o cumprimento de critérios comuns. Esta regra verifica se esta opção está ativada. Note que esta opção não está disponível na edição padrão. Para mais detalhes Visite: [Conformidade de critérios comuns Configuração do servidor ativada](/sql/database-engine/configure-windows/common-criteria-compliance-enabled-server-configuration-option) e [recursos do servidor SQL](https://www.microsoft.com/sql-server/sql-server-2019).        |<nobr>SQL Server 2012+<nobr/>          |
|VA1235     |XPs de replicação devem ser desativados         |Redução da Área da Superfície         |Médio         |Desativar a área de superfície de ataque de XPs de replicação         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1244     |Os utilizadores órfãos devem ser removidos das bases de dados dos servidores SQL         |Redução da Área da Superfície         |Médio         |Um utilizador de base de dados que exista numa base de dados mas que não tenha um login correspondente na base de dados principal ou como um recurso externo (por exemplo, um utilizador do Windows) é referido como um utilizador órfão e deve ser removido ou remapido para um login válido. Esta regra verifica que não há utilizadores órfãos.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1245     |A informação dbo deve ser consistente entre o DB alvo e o mestre         |Redução da Área da Superfície         |Alto         |Existem informações redundantes sobre a identidade dbo para qualquer base de dados: metadados armazenados na própria base de dados e metadados armazenados em DB principal. Esta regra verifica se esta informação é consistente entre o DB alvo e o mestre.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1246     |As funções de candidatura não devem ser utilizadas         |Autenticação e Autorização         |Baixa         |Uma função de aplicação é um principal de base de dados que permite que uma aplicação seja executada com as suas próprias permissões semelhantes ao utilizador. As funções de aplicação permitem que apenas os utilizadores que se conectem através de uma determinada aplicação possam aceder a dados específicos. As funções de aplicação são baseadas em palavras-passe (que aplicações normalmente hardcode) e não baseadas em permissão que expõe a base de dados à imitação de funções de aplicação por adivinhação por palavra-passe. Esta regra verifica se não são definidas funções de candidatura na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL         |
|VA1247     |Não deve haver SPs marcados como arranque automático         |Redução da Área da Superfície         |Alto         |Quando o SQL Server tiver sido configurado para 'pesquisar procs de arranque' o servidor irá digitalizar o DB mestre para procedimentos armazenados marcados como arranque automático. Esta regra verifica se não existem SPs marcados como arranque automático.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1248     |As funções de base de dados definidas pelo utilizador não devem ser membros de funções fixas         |Autenticação e Autorização         |Médio         |Para gerir facilmente as permissões nas suas bases de dados, o SQL Server fornece várias funções, que são os principais de segurança que agrupam outros principais. São como grupos no sistema operativo Microsoft Windows. As contas de base de dados e outras funções do SQL Server podem ser adicionadas em funções de nível de base de dados. Cada membro de uma função de base de dados fixa pode adicionar outros utilizadores a essa mesma função. Esta regra verifica se nenhuma função definida pelo utilizador é membro de funções fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1252     |Lista de eventos a serem auditados e geridos centralmente através de especificações de auditoria do servidor.         |Auditoria e Registo         |Baixa         |A auditoria de uma instância do SqL Server Database Engine ou de uma base de dados individual envolve eventos de rastreio e registo que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista de eventos que estão a ser auditados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1253     |Lista de eventos com âmbito DB a serem auditados e geridos centralmente através de especificações de auditoria de servidores         |Auditoria e Registo         |Baixa         |A auditoria de uma instância do SqL Server Database Engine ou de uma base de dados individual envolve eventos de rastreio e registo que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista completa de todos os eventos atualmente a ser auditados (isto é, ligados a uma auditoria que está ativada) que são geridos específicos do DB.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1256     |Os conjuntos de CLR do utilizador não devem ser definidos na base de dados         |Redução da Área da Superfície         |Alto         |Os conjuntos CLR podem ser usados para executar código arbitrário no processo SQL Server. Esta regra verifica se não existem conjuntos CLR definidos pelo utilizador na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1258     |Os proprietários de bases de dados são como esperado         |Auditoria e Registo         |Alto         |Os proprietários de bases de dados podem realizar todas as atividades de configuração e manutenção na base de dados e também podem deixar cair bases de dados no SQL Server. Os proprietários de bases de dados de rastreio são importantes para evitar ter uma permissão excessiva para alguns principais. Crie uma linha de base que defina os proprietários de bases de dados esperados para a base de dados. Esta regra verifica se os proprietários da base de dados estão definidos na linha de base.         |<nobr>SQL Server 2016+<sup>3</sup><nobr/><br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1263     |Listar todas as auditorias ativas no sistema         |Auditoria e Registo         |Baixa         |A auditoria de uma instância do SqL Server Database Engine ou de uma base de dados individual envolve eventos de rastreio e registo que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista completa de todos os eventos atualmente a ser auditados (por exemplo, ligados a uma auditoria que está ativada).         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1264     |A auditoria de tentativas de login bem sucedidas e falhadas deve ser ativada         |Auditoria e Registo         |Baixa         |A configuração de auditoria do SQL Server permite que os administradores rastreiem os utilizadores que acerem em instâncias do SQL Server pelas quais são responsáveis. Esta regra verifica se a auditoria está ativada para tentativas de login bem sucedidas e falhadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1265     |A auditoria das tentativas de login bem sucedidas e falhadas para a autenticação DB contida deve ser ativada         |Auditoria e Registo         |Médio         |A configuração de auditoria do SQL Server permite aos administradores rastrear o registo de utilizadores nas instâncias do SQL Server pelas quais são responsáveis. Esta regra verifica se a auditoria está ativada para tentativas de login bem sucedidas e falhadas para a autenticação DB contida.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1266     |A opção 'MUST_CHANGE' deve ser definida em todos os logins DO SQL         |Autenticação e Autorização         |Baixa         |Se MUST_CHANGE opção for definida num SESSÃO SQL Server exigirá estabelecer uma nova palavra-passe na primeira vez que o login for utilizado para autenticação. Esta regra verifica se esta opção está definida em todos os logins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1267     |Os utilizadores contidos devem utilizar a Autenticação do Windows         |Autenticação e Autorização         |Médio         |Os utilizadores contidos são utilizadores que existem dentro da base de dados e não necessitam de um mapeamento de login. Esta regra verifica se os utilizadores contidos utilizam a Autenticação do Windows.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1276     |A funcionalidade XPs do Agente deve ser desativada         |Auditoria e Registo         |Médio         |SQL Server Agent é um serviço Microsoft Windows que executa tarefas administrativas programadas no SQL Server. Os XPs do Agente são procedimentos armazenados alargados utilizados pelo Agente do Servidor SQL que fornecem ações privilegiadas que correm externamente para o DBMS no contexto de segurança da conta de serviço do Agente do Servidor SQL. Esta regra verifica se a função Desativação do Agente XPs está desativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1277     |A encriptação da rede Polybase deve ser ativada         |Redução da Área da Superfície         |Alto         |PolyBase é uma tecnologia que acede e combina dados não relacionais e relacionais todos de dentro do SQL Server. A opção de encriptação da rede Polybase configura o SQL Server para encriptar o controlo e os canais de dados ao utilizar o Polybase. Esta regra verifica se esta opção está ativada.         |<nobr>SQL Server 2016+<nobr/>         |
|VA1278     |Criar uma linha de base de fornecedores externos de gestão de chaves         |Redução da Área da Superfície         |Médio         |A SQL Server Extensible Key Management (EKM) permite que os fornecedores de módulos de segurança de hardware (HSM) de terceiros registem os seus módulos no SQL Server. Quando os utilizadores do SQL Server registados podem utilizar as chaves de encriptação armazenadas em módulos EKM. Esta regra apresenta uma lista de fornecedores EKM que estão a ser utilizados no sistema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1279     |A encriptação da força deve ser ativada para TDS         |Proteção de Dados         |Alto         |Quando a opção de Encriptação de Força para o Motor de Base de Dados estiver ativada, todas as comunicações entre cliente e servidor são encriptadas independentemente de a opção 'Ligação encriptada' (como a partir de SSMS) ser verificada ou não. Esta regra verifica se a opção de encriptação do force está ativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1280     |As permissões do servidor concedidas ao público devem ser minimizadas         |Autenticação e Autorização         |Médio         |Cada login do SQL Server pertence à função do servidor público. Quando um titular do servidor não tiver sido concedido ou negado permissões específicas num objeto securável, o utilizador herda as permissões concedidas ao público nesse objeto. Esta regra verifica se as permissões do servidor concedidas ao público são minimizadas.          |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1281     |Todos os membros para funções definidas pelo utilizador devem ser destinados         |Auditoria e Registo         |Médio         |As funções definidas pelo utilizador são princípios de segurança definidos pelo utilizador para agrupar os principais para gerir facilmente permissões. A monitorização destas funções é importante para evitar permissões excessivas. Crie uma linha de base que defina a adesão esperada para cada papel definido pelo utilizador. Esta regra verifica se todas as associações para funções definidas pelo utilizador são definidas como definidas na linha de base.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1282     |As funções órfãs devem ser removidas         |Autenticação e Autorização         |Baixa         |Funções órfãs são funções definidas pelo utilizador que não têm membros. Eliminar papéis órfãos, uma vez que não são necessários no sistema. Esta regra verifica se há algum papel órfão.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA1283     |Deve haver pelo menos 1 auditoria ativa no sistema         |Auditoria e Registo         |Baixa         |A auditoria de uma instância do SqL Server Database Engine ou de uma base de dados individual envolve eventos de rastreio e registo que ocorrem no Motor de Base de Dados. O objeto de auditoria do servidor SQL recolhe uma única instância de ações de servidor ou nível de base de dados e grupos de ações para monitorizar. Esta regra verifica que existe pelo menos uma auditoria ativa no sistema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1286     |As permissões de base de dados não devem ser concedidas diretamente aos principais (OBJECT ou COLUMN)         |Autenticação e Autorização         |Baixa         |As permissões são regras associadas a um objeto titular para regular quais os utilizadores que podem ter acesso ao objeto. Esta regra verifica se não existem permissões DB concedidas diretamente aos utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA1288     |Colunas de dados sensíveis devem ser classificadas         |Proteção de Dados         |Médio         |Esta regra descobre e caracteriza dados potencialmente sensíveis na base de dados. O resultado é uma coleção de colunas de base de dados sensíveis, que devem ser revistas e classificadas usando a Classificação & de descoberta de dados SQL. Isto permite que as colunas de base de dados sejam rotuladas persistentemente de acordo com a sua sensibilidade, o que permite rastrear (auditoria) a utilização de dados classificados e criar relatórios. Se as colunas de base de dados sensíveis estiverem desprotegidas, deve também considerar a aplicação de uma das capacidades de segurança incorporadas da SQL Database para restringir o acesso e proteger os seus dados sensíveis.         |<nobr/>Base de Dados SQL         |
|VA2000     |Deve ser concedido um conjunto mínimo de principais permissões de alto impacto na base de dados         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de alto impacto na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2001     |Deve ser concedido um conjunto mínimo de princípios com permissões de elevado impacto em objetos ou colunas         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios recebe permissões de alto impacto em objetos ou colunas.        |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2002     |Deve ser concedido um conjunto mínimo de principais com elevado impacto em várias autorizações de segurança         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de alto impacto em várias autorizações securáveis.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2010     |Deve ser concedido um conjunto mínimo de principais permissões de base de dados de impacto médio         |Autenticação e Autorização         |Médio         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de base de dados de impacto médio.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2020     |Deve ser concedido um conjunto mínimo de principais ALTER ou ALTERAR quaisquer permissões de âmbito de base de dados do utilizador         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios é concedido ALTER ou ALTERAR QUAISQUER permissões de âmbito de base de dados do utilizador.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2021     |Deve ser concedido um conjunto mínimo de principais com base de dados para alter em objetos ou colunas         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios recebe permissões de âmbito de base de dados ALTER em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2022     |O conjunto mínimo de principais deve ser concedido permissão ALTER com âmbito de base de dados em vários securáveis         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões ALTER com âmbito de base de dados em várias garantias.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2030     |O conjunto mínimo de principais deve ser concedido permissões SELECT ou EXECUTE com âmbito de base de dados         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios é concedido permissões SELECT ou EXECUTE.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2031     |O conjunto mínimo de principais deve ser concedido com base de dados SELECT          |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios é concedida permissão SELECT em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2032     |O conjunto mínimo de principais deve ser concedido permissões SELECT ou EXECUTE no esquema         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de principais são concedidos permissões SELECT ou EXECUTE em esquema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2033     |Deve ser concedido um conjunto mínimo de princípios com base de dados executada em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios é concedida permissão EXECUT em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2034     |O conjunto mínimo de principais deve ser concedido permissão executária com âmbito de base de dados na XML Schema Collection         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de principais é concedido permissão EXECUT com âmbito de base de dados na XML Schema Collection.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL         |
|VA2040     |Deve ser concedido um conjunto mínimo de principais com permissões de baixo impacto na base de dados         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de baixo impacto na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2041     |Deve ser concedido um conjunto mínimo de principais com baixas permissões de impacto em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios recebe permissões de baixo impacto em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2042     |O conjunto mínimo de principais deve ser concedido permissões de baixo impacto na base de dados sobre o esquema         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de baixo impacto na base de dados sobre esquemas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2050     |Deve ser concedido um conjunto mínimo de autorizações de DEFINIÇÃO DE PONTOS de Base de Dados         |Autenticação e Autorização         |Médio         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido a permissões de DEFINIÇÃO DE VER com âmbito de base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2051     |Deve ser concedido um conjunto mínimo de principais com base de dados com permissão de DEFINIÇÃO de PONTOS de Base de Dados em objetos ou colunas         |Autenticação e Autorização         |Médio         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios é concedido a permissões de DEFINIÇÃO DE VER em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2052     |Deve ser concedido um conjunto mínimo de princípios com base de dados com a permissão de DEFINIÇÃO DE VISÃO em vários securáveis         |Autenticação e Autorização         |Médio         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissão de DEFINIÇÃO DE VER em vários securáveis.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2060     |A Deteção de Ameaças SQL deve ser ativada ao nível do servidor         |Proteção de Dados         |Médio         |A Deteção de Ameaças SQL fornece uma camada de segurança que deteta potenciais vulnerabilidades e atividade anómala em bases de dados como ataques de injeção de SQL e padrões de comportamento incomuns. Quando uma ameaça potencial é detetada A Deteção de Ameaças envia um alerta em tempo real accível por e-mail e no Centro de Segurança Azure, que inclui medidas claras de investigação e reparação para a ameaça específica. Para mais informações, consulte a [deteção de ameaças configurada.](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection) Esta verificação verifica se a Deteção de Ameaças SQL está ativada         |<nobr/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2061     |A auditoria deve ser ativada ao nível do servidor         |Auditoria e Registo         |Alto         |A Azure SQL Database Auditing rastreia eventos de base de dados e escreve-os para um registo de auditoria na sua conta de armazenamento Azure. A auditoria ajuda-o a compreender a atividade da base de dados e a obter informações sobre discrepâncias e anomalias que possam indicar preocupações comerciais ou suspeitas de violações de segurança, bem como ajuda-o a cumprir a conformidade regulamentar. Para mais informações, consulte [a Azure SQL Auditing](https://docs.microsoft.com/azure/sql-database/sql-database-auditing). Esta regra verifica se a auditoria está ativada.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse          |
|VA2062     |As regras de firewall ao nível da base de dados não devem conceder acesso excessivo         |Redução da Área da Superfície         |Alto         |A firewall de nível de base de dados Azure SQL ajuda a proteger os seus dados, evitando todo o acesso à sua base de dados até especificar quais endereços IP têm permissão. As regras de firewall ao nível da base de dados concedem acesso à base de dados específica com base no endereço IP originário de cada pedido.  As regras de firewall ao nível da base de dados para bases de dados de mestres e utilizadores só podem ser criadas e geridas através do Transact-SQL (ao contrário das regras de firewall ao nível do servidor, que também podem ser criadas e geridas através do portal Azure ou powerShell). Para obter mais informações, consulte [a Base de Dados Azure SQL e as regras de firewall IP Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Esta verificação verifica se as regras de firewall ao nível da base de dados não concedem acesso excessivo.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2063     |As regras de firewall ao nível do servidor não devem conceder acesso excessivo         |Redução da Área da Superfície         |Alto         |A firewall de nível de servidor Azure SQL ajuda a proteger o seu servidor, evitando todo o acesso às suas bases de dados até especificar quais endereços IP têm permissão. As regras de firewall ao nível do servidor concedem acesso a todas as bases de dados que pertencem ao servidor com base no endereço IP originário de cada pedido.  As regras de firewall ao nível do servidor só podem ser criadas e geridas através do Transact-SQL, bem como através do portal Azure ou PowerShell. Para obter mais informações, consulte [a Base de Dados Azure SQL e as regras de firewall IP Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Esta verificação verifica se as regras de firewall ao nível do servidor não concedem acesso excessivo.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2064     |As regras de firewall ao nível da base de dados devem ser rastreadas e mantidas no mínimo         |Redução da Área da Superfície         |Alto         |A firewall de nível de base de dados Azure SQL ajuda a proteger os seus dados, evitando todo o acesso à sua base de dados até especificar quais endereços IP têm permissão. As regras de firewall ao nível da base de dados concedem acesso à base de dados específica com base no endereço IP originário de cada pedido. As regras de firewall ao nível da base de dados para bases de dados de mestres e utilizadores só podem ser criadas e geridas através do Transact-SQL (ao contrário das regras de firewall ao nível do servidor, que também podem ser criadas e geridas através do portal Azure ou powerShell). Para obter mais informações, consulte [a Base de Dados Azure SQL e as regras de firewall IP Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Esta verificação enumera todas as regras de firewall ao nível da base de dados para que quaisquer alterações que lhes sejam feitas possam ser identificadas e endereçadas.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2065     |As regras de firewall ao nível do servidor devem ser rastreadas e mantidas no mínimo         |Redução da Área da Superfície         |Alto         |A firewall de nível de servidor Azure SQL ajuda a proteger os seus dados, impedindo todo o acesso às suas bases de dados até especificar quais endereços IP têm permissão. As regras de firewall ao nível do servidor concedem acesso a todas as bases de dados que pertencem ao servidor com base no endereço IP originário de cada pedido.  As regras de firewall ao nível do servidor podem ser criadas e geridas através do Transact-SQL, bem como através do portal Azure ou PowerShell. Para obter mais informações, consulte [a Base de Dados Azure SQL e as regras de firewall IP Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).  Esta verificação enumera todas as regras de firewall ao nível do servidor para que quaisquer alterações feitas a elas possam ser identificadas e endereçadas.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2100     |O conjunto mínimo de principais deve ser concedido permissões de alto impacto com âmbito de servidor         |Autenticação e Autorização         |Alto         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de principais recebe permissões de alto impacto com âmbito de servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2101     |Deve ser concedido um conjunto mínimo de principais a permissões de âmbito de servidor de impacto médio         |Autenticação e Autorização         |Médio         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de princípios recebe permissões de alcance médio do servidor de impacto.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2102     |O conjunto mínimo de principais deve ser concedido permissões de baixo impacto com o servidor         |Autenticação e Autorização         |Baixa         |Cada SQL Server titular tem permissões associadas a ele que podem ser concedidas aos principais. As permissões podem ser a nível do servidor (atribuídas a logins e funções de servidor) ou ao nível da base de dados (atribuídas a utilizadores de bases de dados e funções de base de dados). Estas regras verificam se apenas um conjunto mínimo de principais recebe permissões de baixo impacto com o servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2103     |Permissões de execução desnecessárias em procedimentos armazenados alargados devem ser revogadas         |Autenticação e Autorização         |Médio         |Os procedimentos armazenados alargados são DLLs que um caso de SQL Server pode carregar e executar dinamicamente. O SQL Server é embalado com muitos procedimentos armazenados alargados que permitem a interação com os DLLs do sistema. Esta regra verifica se foram revogadas permissões de execução desnecessárias em procedimentos armazenados alargados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2104     |Executar permissões sobre procedimentos armazenados alargados deve ser revogado do PÚBLICO         |Autenticação e Autorização         |Médio         |Os procedimentos armazenados alargados são DLLs que um caso de SQL Server pode carregar e executar dinamicamente. O SQL Server é embalado com muitos procedimentos armazenados alargados que permitem a interação com os DLLs do sistema. Esta regra verifica se não são concedidas permissões de execução desnecessárias ao PAPEL DO PÚBLICO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2105     |A palavra-passe de login não deve ser facilmente adivinhada         |Autenticação e Autorização         |Alto         |Esta regra verifica se as palavras-passe de login não são facilmente adivinhadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2107     |Conjunto mínimo de principais devem ser membros de funções fixas de base de dados master Azure SQL DB         |Autenticação e Autorização         |Alto         |A SQL Database fornece duas funções administrativas restritas na base de dados principal à qual podem ser adicionadas contas de utilizador que concedem permissões para criar bases de dados ou gerir logins. Esta regra verifica se um conjunto mínimo de princípios são membros destas funções administrativas.         |<nobr/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2108     |Conjunto mínimo de principais devem ser membros de funções fixas de base de dados de alto impacto         |Autenticação e Autorização         |Alto         |O SQL Server fornece funções para ajudar a gerir as permissões. As funções são os princípios de segurança que agrupam outros diretores. As funções de nível de base de dados são de toda a base de dados no seu âmbito de permissão. Esta regra verifica se um conjunto mínimo de princípios são membros das funções de base de dados fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2109     |Conjunto mínimo de principais devem ser membros de funções fixas de base de dados de baixo impacto         |Autenticação e Autorização         |Baixa         |O SQL Server fornece funções para ajudar a gerir as permissões. As funções são os princípios de segurança que agrupam outros diretores. As funções de nível de base de dados são de toda a base de dados no seu âmbito de permissão. Esta regra verifica se um conjunto mínimo de princípios são membros das funções de base de dados fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2110     |Executar permissões de acesso ao registo deve ser revogado         |Autenticação e Autorização         |Alto         |Os procedimentos de conservação alargados do registo permitem ao Microsoft SQL Server ler valores e chaves de escrita e enumerar no registo. São usados pelo Enterprise Manager para configurar o servidor. Esta regra verifica se as permissões de execução dos procedimentos de conservação alargados foram revogadas de todos os utilizadores (com não ser dbo).         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2111     |As bases de dados das amostras devem ser removidas         |Redução da Área da Superfície         |Baixa         |O Microsoft SQL Server vem enviado com várias bases de dados de amostras. Esta regra verifica se as bases de dados da amostra foram removidas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2112     |As permissões do PÚBLICO para serviços de transformação de dados (DTS) devem ser revogadas         |Autenticação e Autorização         |Médio         |Data Transformation Services (DTS) é um conjunto de objetos e utilitários que permitem a automatização de operações de Transformação e Carga de Extratos (ETL) de ou de uma base de dados. Os objetos são pacotes DTS e os seus componentes e os utilitários são chamados ferramentas DTS. Esta regra verifica que foram revogadas as permissões para o PAPEL PÚBLICO utilizar os procedimentos armazenados pelo sistema DTS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2113     |Permissões de Serviços de Transformação de Dados (DTS) só devem ser concedidas a funções de SSIS         |Autenticação e Autorização         |Médio         |Data Transformation Services (DTS) é um conjunto de objetos e utilitários que permitem a automatização de operações de transformação e carga de extratos de ou para uma base de dados. Os objetos são pacotes DTS e os seus componentes e os utilitários são chamados ferramentas DTS. Esta regra verifica se apenas as funções SSIS são autorizadas a utilizar os procedimentos armazenados do sistema DTS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2114     |Conjunto mínimo de principais devem ser membros de funções de servidor fixo de alto impacto         |Autenticação e Autorização         |Alto         |O SQL Server fornece funções para ajudar a gerir permissões. As funções são os princípios de segurança que agrupam outros diretores. As funções de nível do servidor são de todo o servidor no seu âmbito de permissão. Esta regra verifica se um conjunto mínimo de princípios são membros das funções fixas do servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2115     |Conjunto mínimo de principais devem ser membros de funções de servidor fixo de impacto médio         |Autenticação e Autorização         |Médio         |O SQL Server fornece funções para ajudar a gerir permissões. As funções são os princípios de segurança que agrupam outros diretores. As funções de nível do servidor são de todo o servidor no seu âmbito de permissão. Esta regra verifica se um conjunto mínimo de princípios são membros das funções fixas do servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2120     |As funcionalidades que podem afetar a segurança devem ser desativadas         |Redução da Área da Superfície         |Alto         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços prestados por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. Esta regra verifica se estas funcionalidades estão desativadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2121     | Função 'Procedimentos de Automatização OLE' deve ser desativada        |Redução da Área da Superfície         |Alto         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços, fornecidos por defeito, podem não ser necessários, e permitir-lhes afetar negativamente a segurança do sistema. A opção procedimentos de automatização OLE controla se os objetos de automatização OLE podem ser instantâneos dentro de lotes Transact-SQL. Estes são procedimentos armazenados alargados que permitem aos utilizadores do SQL Server executar funções externas ao SQL Server. Independentemente dos seus benefícios, também pode ser usado para explorações e é conhecido como um mecanismo popular para plantar ficheiros nas máquinas-alvo. É aconselhável utilizar o PowerShell como substituto desta ferramenta. Esta regra verifica se a função 'Procedimentos de Automatização OLE' está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2122     |A funcionalidade 'Opções do Utilizador' deve ser desativada         |Redução da Área da Superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços prestados por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. As opções do utilizador especificam os padrão global para todos os utilizadores. É estabelecida uma lista de opções de processamento de consulta por predefinição durante a duração da sessão de trabalho de um utilizador. As opções do utilizador permitem alterar os valores predefinidos das opções SET (se as definições predefinidos do servidor não forem adequadas). Esta regra verifica se a função "opções do utilizador" está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2123     |A função 'Acesso Remoto' deve ser desativada         |Redução da Área da Superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços prestados por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. A opção de acesso remoto controla a execução de procedimentos locais armazenados em servidores remotos ou procedimentos armazenados à distância no servidor local. Esta regra verifica se a função de "acesso remoto" está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL         |
|VA2126     |As funcionalidades que podem afetar a segurança devem ser desativadas         |Redução da Área da Superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços prestados por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. Esta regra verifica se estas funcionalidades estão desativadas.         |<nobr>SQL Server 2016+<nobr/>         |
|VA2127     |A funcionalidade 'Scripts Externos' deve ser desativada         |Redução da Área da Superfície         |Alto         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços prestados por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. A opção "Scripts Externos ativados" permite a execução de scripts com determinadas extensões de linguagem remota. Esta regra verifica se a função 'Scripts Externos Activados' está desativada.         |<nobr>SQL Server 2016+<nobr/>         |
|VA2128     |A Avaliação de Vulnerabilidade não é suportada para versões SQL Server inferiores a SQL Server 2012         |Atualizações e patches de instalação         |Alto         |Para executar uma verificação de Avaliação de Vulnerabilidade no seu SQL Server, o servidor precisa de ser atualizado para SQL Server 2012 ou superior, SQL Server 2008 R2 e abaixo já não são suportados pela Microsoft. Para mais informações, consulte <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>         |<nobr>SQL Server 2012+<nobr/><br/><br/>Instância Gerida do SQL<br/><br/>Base de Dados SQL<br/><br/>Azure Synapse         |
|VA2129     |As alterações aos módulos assinados devem ser autorizadas         |Autenticação e Autorização         |Alto         |Pode assinar um procedimento, função ou gatilho armazenado com um certificado ou uma chave assimétrica. Isto é projetado para cenários em que as permissões não podem ser herdadas através da corrente de propriedade ou quando a cadeia de propriedade é quebrada, como SQL dinâmico. Esta regra verifica as alterações feitas aos módulos assinados, o que pode ser uma indicação de uso malicioso.         |<nobr>SQL Server 2012+<nobr/><br/><br/>Base de Dados SQL         |
|VA2130     |Acompanhe todos os utilizadores com acesso à base de dados         |Autenticação e Autorização         |Baixa         |Os utilizadores devem ter permissões de acordo com o princípio do menor privilégio - Cada utilizador deve receber o conjunto mínimo de permissões necessárias para o seu papel. Esta verificação rastreia todos os utilizadores com acesso a uma base de dados. Verifique se estes utilizadores estão autorizados de acordo com o seu papel atual na organização. As informações de permissões neste controlo podem suportar um processo de Revisão do Acesso ao Utilizador para a base de dados.         |<nobr>Base de Dados SQL<nobr/><br/><br/>Azure Synapse         |

<sup>1</sup> **SQL Server 2012+** refere-se a todas as versões do SQL Server 2012 e acima.

<sup>2</sup> **SQL Server 2017+** refere-se a todas as versões do SQL Server 2017 e acima.

<sup>3</sup> **SQL Server 2016+** refere-se a todas as versões do SQL Server 2016 e acima.

## <a name="next-steps"></a>Próximos passos

- [Avaliação de vulnerabilidades](sql-vulnerability-assessment.md)
