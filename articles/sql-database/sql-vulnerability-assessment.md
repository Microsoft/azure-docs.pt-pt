---
title: Avaliação de vulnerabilidade do SQL-banco de dados SQL do Azure | Microsoft Docs
description: Saiba como configurar o e a avaliação de vulnerabilidades do SQL no banco de dados SQL e interpretar os relatórios de avaliação.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: ronitr
ms.author: ronitr
ms.reviewer: vanto, carlrab
ms.date: 03/12/2019
ms.openlocfilehash: a65539f1ec6f4a5cab13d35b75f98c428558f884
ms.sourcegitcommit: 7c4de3e22b8e9d71c579f31cbfcea9f22d43721a
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 07/26/2019
ms.locfileid: "68566146"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>O serviço de avaliação de vulnerabilidade do SQL ajuda a identificar vulnerabilidades de banco de dados

A avaliação de vulnerabilidades do SQL é um serviço fácil de configurar que pode descobrir, acompanhar e ajudá-lo a corrigir possíveis vulnerabilidades no banco de dados. Utilize-a para melhorar proativamente a segurança da base de dados.

A avaliação de vulnerabilidades faz parte da oferta do ADS ( [segurança de dados avançada](sql-database-advanced-data-security.md) ), que é um pacote unificado para recursos avançados de segurança do SQL. A avaliação de vulnerabilidade pode ser acessada e gerenciada por meio do portal de anúncios do SQL central.

> [!NOTE]
> Há suporte para avaliação de vulnerabilidade no banco de dados SQL do Azure, Azure SQL Instância Gerenciada e Azure SQL Data Warehouse. Para simplificar, o banco de dados SQL é usado neste artigo ao se referir a qualquer um desses serviços de banco de dados gerenciado.

## <a name="the-vulnerability-assessment-service"></a>O serviço de avaliação de vulnerabilidade

O VA (avaliação de vulnerabilidades do SQL) é um serviço que fornece visibilidade do seu estado de segurança e inclui etapas acionáveis para resolver problemas de segurança e aprimorar a segurança do banco de dados. Ele pode ajudá-lo a:  

- Atenda aos requisitos de conformidade que exigem relatórios de verificação de banco de dados.  
- Atenda aos padrões de privacidade de dados.  
- Monitore um ambiente de banco de dados dinâmico onde as alterações são difíceis de rastrear.  

A Avaliação de Vulnerabilidades é um serviço de avaliação incorporado no serviço da Base de Dados SQL do Azure. O serviço emprega uma base de dados de conhecimento de regras que sinaliza vulnerabilidades de segurança e realça desvios das práticas recomendadas, como configurações incorretas, excesso de permissões e dados confidenciais não protegidos. As regras se baseiam nas práticas recomendadas da Microsoft e se concentram nos problemas de segurança que apresentam os maiores riscos ao seu banco de dados e seus valiosos. Eles abrangem os problemas no nível do banco de dados, bem como problemas de segurança no nível do servidor, como configurações de firewall do servidor e permissões de nível de servidor. Essas regras também representam muitos dos requisitos de vários órgãos regulatórios para atender aos seus padrões de conformidade.  

Os resultados da verificação incluem etapas acionáveis para resolver cada problema e fornecer scripts de correção personalizados quando aplicável. Um relatório de avaliação pode ser personalizado para seu ambiente definindo uma linha de base aceitável para configurações de permissão, configurações de recurso e configurações de banco de dados.

## <a name="implementing-vulnerability-assessment"></a>Implementando a avaliação de vulnerabilidades

As etapas a seguir implementam o VA no banco de dados SQL.  

### <a name="1-run-a-scan"></a>1. Execute uma análise  

Comece a usar o VA navegando até **segurança de dados avançada** no título segurança no painel do banco de dados SQL do Azure. Clique para habilitar a segurança de dados avançada e, em seguida, clique em **selecionar armazenamento** ou no cartão de **avaliação de vulnerabilidade** , que abre automaticamente o cartão de configurações de avaliação de vulnerabilidade para todo o SQL Server.

Comece Configurando uma conta de armazenamento na qual os resultados da verificação para todos os bancos de dados no servidor serão armazenados. Para obter informações sobre contas de armazenamento, consulte [sobre contas de armazenamento do Azure](../storage/common/storage-create-storage-account.md). Quando o armazenamento estiver configurado, clique em **verificar** para verificar se há vulnerabilidades no banco de dados.
  
![Verificar um banco de dados](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > A verificação é leve e segura. Leva alguns segundos para ser executado e é inteiramente somente leitura. Ele não faz nenhuma alteração no banco de dados.  

### <a name="2-view-the-report"></a>2. Veja o relatório

Quando a verificação for concluída, o relatório de verificação será exibido automaticamente na portal do Azure. O relatório apresenta uma visão geral do estado de segurança: quantos problemas foram encontrados e suas respectivas severidades. Os resultados incluem avisos sobre desvios das práticas recomendadas e um instantâneo de suas configurações relacionadas à segurança, como entidades de banco de dados e funções e suas permissões associadas. O relatório de verificação também fornece um mapa de dados confidenciais descobertos em seu banco de dado e inclui recomendações para classificar esses dados usando a [descoberta de dados & classificação](sql-database-data-discovery-and-classification.md).

![Veja o relatório](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analise os resultados e resolva os problemas

Examine os resultados e determine as descobertas no relatório que são problemas de segurança verdadeiros em seu ambiente. Faça uma busca detalhada de cada resultado com falha para entender o impacto da localização e por que cada verificação de segurança falhou. Use as informações de correção acionáveis fornecidas pelo relatório para resolver o problema.  

![Analisar o relatório](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Definir sua linha de base

Ao examinar os resultados da avaliação, você pode marcar resultados específicos como uma linha de *base* aceitável em seu ambiente. A linha de base é essencialmente uma personalização de como os resultados são relatados. Os resultados que correspondem à linha de base são considerados como passagem em verificações subsequentes. Depois de estabelecer o estado de segurança de linha de base, o VA relata apenas os desvios da linha de base e você pode concentrar sua atenção nos problemas relevantes.  

![Definir sua linha de base](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Execute uma nova análise para ver o relatório de controlo personalizado

Depois de concluir a configuração das **linhas de base de regra**, execute uma nova verificação para exibir o relatório personalizado. O VA agora relata apenas os problemas de segurança que se desviam do seu estado de linha de base aprovado.

![Exibir seu relatório personalizado](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

A avaliação de vulnerabilidade agora pode ser usada para monitorar que seu banco de dados mantém um alto nível de segurança em todos os momentos e que suas políticas organizacionais são atendidas. Se os relatórios de conformidade forem necessários, os relatórios do VA poderão ser úteis para facilitar o processo de conformidade.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. Configure análises periódicas recorrentes

Navegue até as configurações de avaliação de vulnerabilidade para ativar **verificações**recorrentes periódicas. Isso configura a avaliação de vulnerabilidade para executar automaticamente uma verificação no banco de dados uma vez por semana. Um resumo do resultado da verificação será enviado para o endereço (s) de email que você fornecer.

![Exibir seu relatório personalizado](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Exporte um relatório de avaliação

Clique em **Exportar resultados da verificação** para criar um relatório do Excel para download do resultado da verificação. Este relatório contém uma guia Resumo que exibe um resumo da avaliação, incluindo todas as verificações com falha. Ele também inclui uma guia **resultados** que contém o conjunto completo de resultados da verificação, incluindo todas as verificações que foram executadas e os detalhes de resultado de cada uma.

### <a name="8-view-scan-history"></a>8. Veja o histórico de análises

Clique em **histórico de verificação** no painel VA para exibir um histórico de todas as verificações executadas anteriormente neste banco de dados. Selecione uma verificação específica na lista para exibir os resultados detalhados dessa verificação.

A avaliação de vulnerabilidade agora pode ser usada para monitorar que seu banco de dados mantém um alto nível de segurança em todos os momentos e que suas políticas organizacionais são atendidas. Se os relatórios de conformidade forem necessários, os relatórios do VA poderão ser úteis para facilitar o processo de conformidade.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Gerenciar avaliações de vulnerabilidade usando o Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> O módulo Azure Resource Manager do PowerShell ainda tem suporte do banco de dados SQL do Azure, mas todo o desenvolvimento futuro é para o módulo AZ. Sql. Para esses cmdlets, consulte [AzureRM. SQL](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Os argumentos para os comandos no módulo AZ e nos módulos AzureRm são substancialmente idênticos.

Você pode usar os cmdlets Azure PowerShell para gerenciar programaticamente suas avaliações de vulnerabilidade. Os cmdlets com suporte são:

- [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  Atualiza as configurações de avaliação de vulnerabilidade de um banco de dados
- [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  Retorna as configurações de avaliação de vulnerabilidade de um banco de dados
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  Limpa as configurações de avaliação de vulnerabilidade de um banco de dados
- [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Define a linha de base da regra de avaliação de vulnerabilidade.
- [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Obtém a linha de base da regra de avaliação de vulnerabilidade para uma determinada regra.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Limpa a linha de base da regra de avaliação de vulnerabilidade. Primeiro, defina a linha de base antes de usar este cmdlet para limpá-la.
- [Start-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  Dispara o início de uma verificação de avaliação de vulnerabilidade
- [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   Obtém todos os registros de verificação de avaliação de vulnerabilidade associados a um determinado banco de dados.
- [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  Converte os resultados da verificação de avaliação de vulnerabilidade em um arquivo do Excel

Para obter um exemplo de script, consulte [suporte do PowerShell de avaliação de vulnerabilidade do SQL do Azure](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="next-steps"></a>Passos Seguintes  

- Saiba mais sobre a [segurança de dados avançada](sql-database-advanced-data-security.md)
- Saiba mais sobre a [classificação de & de descoberta de dados](sql-database-data-discovery-and-classification.md)
