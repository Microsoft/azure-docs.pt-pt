---
title: Avaliação de vulnerabilidades do SQL - base de dados SQL do Azure | Documentos da Microsoft
description: Saiba como configurar e avaliação de vulnerabilidades do SQL na base de dados SQL e interpretar os relatórios de avaliação.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: ronitr
ms.author: ronitr
ms.reviewer: vanto, carlrab
manager: craigg
ms.date: 05/17/2018
ms.openlocfilehash: 6b0b613504ffc329af267fcaba13f1e27beee7b5
ms.sourcegitcommit: 51a1476c85ca518a6d8b4cc35aed7a76b33e130f
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 09/25/2018
ms.locfileid: "47164451"
---
# <a name="sql-vulnerability-assessment"></a>Avaliação de Vulnerabilidades do SQL

Avaliação de vulnerabilidades de SQL é uma fácil de configurar o serviço que pode detetar, controlar e ajudarão a remediar potenciais vulnerabilidades das bases de dados. Utilizá-lo proativamente a melhorar a segurança da base de dados. 

Avaliação de vulnerabilidades é parte da [proteção contra ameaças avançadas do SQL](sql-advanced-threat-protection.md) oferta (ATP), o que é um pacote unificado para funções de segurança avançadas do SQL. Avaliação de vulnerabilidades pode ser acedida e gerenciada através do portal SQL ATP central.

## <a name="what-is-vulnerability-assessment"></a>O que é a Avaliação de Vulnerabilidades?
Avaliação de vulnerabilidade de SQL (VA) é um serviço que fornece visibilidade sobre o estado da segurança e inclui passos acionáveis para resolver problemas de segurança e melhorar a segurança da base de dados. Ele pode ajudá-lo a:  
- Cumprir os requisitos de conformidade que exigem os relatórios de análise de dados.  
- Cumpre as normas de privacidade de dados.  
- Monitorize um ambiente de base de dados dinâmicos em que as alterações são difíceis de acompanhar.  

Avaliação de vulnerabilidades é um serviço de análise incorporado no serviço de base de dados do Azure SQL. O serviço emprega uma base de dados de conhecimento de regras que sinalize vulnerabilidades de segurança e realçar desvios das melhores práticas, tais como configurações incorretas, permissões excessivas e dados confidenciais não protegidos. As regras são baseadas em práticas recomendadas e enfoca os problemas de segurança que apresentam os maiores riscos para a base de dados e os respetivos dados valiosos da Microsoft. Eles abrangem os problemas de nível de base de dados, assim como questões de segurança ao nível do servidor, como definições de firewall do servidor e permissões ao nível do servidor. Estas regras também representam muitos dos requisitos de vários órgãos normativos para atender aos seus padrões de conformidade.  

Os resultados da verificação incluem passos acionáveis para resolver cada problema e fornecer scripts de remediação personalizados, sempre que aplicável. Um relatório de avaliação pode ser personalizado para o seu ambiente através da definição de uma linha de base aceitável para configurações de permissão, configurações de funcionalidades e definições de base de dados.   

## <a name="implementing-va"></a>Implementação de avaliação de vulnerabilidades  
Os seguintes passos implementam VA na base de dados SQL.  

## <a name="1-run-a-scan"></a>1. Executar uma análise  
Introdução ao VA ao navegar até **proteção avançada contra ameaças** sob o cabeçalho de segurança no seu painel de SQL Database do Azure. Clique para ativar a proteção avançada contra ameaças e, em seguida, clique nas **avaliação de vulnerabilidade** cartão, o que abre automaticamente o cartão de definições de avaliação de vulnerabilidades. 

Comece por configurar uma conta de armazenamento onde serão armazenados os seus resultados de análise. Para obter informações sobre contas de armazenamento, consulte [sobre as contas de armazenamento](../storage/common/storage-create-storage-account.md). Depois de configurar o armazenamento, clique em **analisar** para analisar a sua base de dados de vulnerabilidades.
  
![Uma base de dados de análise](./media/sql-vulnerability-assessment/pp_va_initialize.png)  
  > [!NOTE]   
  > A análise é simples e seguro. Demora alguns segundos para executar e é totalmente só de leitura. Não faz quaisquer alterações à base de dados.  

## <a name="2-view-the-report"></a>2. Ver o relatório  
Quando a verificação for concluída, o relatório de análise é automaticamente apresentado no portal do Azure. O relatório apresenta uma visão geral do Estado da segurança: foram encontrados problemas quantos e seus respectivas gravidades. Os resultados incluem avisos sobre os desvios das melhores práticas e um instantâneo das definições relacionadas com segurança, tais como entidades de base de dados e funções e as respetivas permissões associadas. O relatório de análise também fornece um mapa de dados confidenciais detetados na base de dados e inclui recomendações para classificar esses dados usando [dados de deteção e classificação](sql-database-data-discovery-and-classification.md). 
 
![Ver o relatório](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

## <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analisar os resultados e resolver problemas  
Reveja os resultados e determine as descobertas no relatório que são problemas de segurança verdadeiro no seu ambiente. Desagregar para cada resultado com falhas para compreender o impacto de a localizar e por que motivo cada verificação de segurança falhou. Utilize as informações de remediação passíveis de ação fornecidas pelo relatório de resolver o problema.  

![Analisar o relatório](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)    

## <a name="4-set-your-baseline"></a>4. Definir a sua linha de base  
Como rever os resultados de avaliação, pode marcar resultados específicos como sendo um aceitável *linha de base* no seu ambiente. A linha de base é basicamente uma personalização da forma como os resultados são comunicados. Os resultados que correspondem a linha de base são considerados como transmitir verificações subsequentes. Depois de estabelecer o estado da segurança de linha de base, VA apenas relatórios sobre os desvios da linha de base e que se possa concentrar sua atenção sobre os problemas relevantes.  

![Definir a sua linha de base](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

## <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Execute uma nova análise para ver o relatório de controlo personalizado  
Depois de concluir a definição de segurança de seus **linhas de base de regra**, execute uma nova análise para ver o relatório personalizado. Avaliação de vulnerabilidades agora comunica que apenas a segurança emite esse desviar do seu estado de linha de base aprovada. 
 
![Ver o seu relatório personalizado](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

Avaliação de vulnerabilidades pode agora ser utilizada para monitorizar o que a sua base de dados mantém um alto nível de segurança durante todo o tempo e que as políticas organizacionais são cumpridas. Se os relatórios de conformidade, relatórios de avaliação de vulnerabilidades podem ser útil para facilitar o processo de conformidade.  

## <a name="6-set-up-periodic-recurring-scans"></a>6. Configurar as análises periódicas recorrentes
Navegue para as definições de avaliação de vulnerabilidades, ativassem **análises periódicas recorrentes**. Esta ação configura a avaliação de vulnerabilidade para executar automaticamente uma análise em sua base de dados uma vez por semana. Um resumo de resultados de verificação será enviado para os endereços de e-mail que indicar.

![Ver o seu relatório personalizado](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

## <a name="7---export-an-assessment-report"></a>7.   Exportar um relatório de avaliação
Clique em **exportar resultados de verificações** para criar um relatório de Excel que pode ser baixado do seu resultado de análise. Este relatório contém uma guia de resumida que mostra um resumo da avaliação, incluindo verificações falhas todas. Ele também inclui um **resultados** guia contendo o conjunto completo de resultados da análise, incluindo todas as verificações que eram execução e os detalhes de resultado de cada. 

## <a name="8---view-scan-history"></a>8.   Ver histórico de análise
Clique em **histórico de análise** no painel de avaliação de vulnerabilidades para ver um histórico de todas as verificações executada anteriormente nesta base de dados. Na lista para ver os resultados detalhados dessa análise, selecione uma verificação particular.

Avaliação de vulnerabilidades pode agora ser utilizada para monitorizar o que a sua base de dados mantém um alto nível de segurança durante todo o tempo e que as políticas organizacionais são cumpridas. Se os relatórios de conformidade, relatórios de avaliação de vulnerabilidades podem ser útil para facilitar o processo de conformidade.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Gerir com o Azure PowerShell de avaliações de vulnerabilidade

Pode utilizar cmdlets do Azure PowerShell para gerir as suas avaliações de vulnerabilidade de forma programática. Os cmdlets suportados são:

* [Atualização-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Update-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) -atualiza as definições de avaliação de vulnerabilidade de uma base de dados
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) devolve a vulnerabilidade as definições de avaliação de uma base de dados
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentSettings?view=azurermps-6.6.0) limpar as definições de avaliação de vulnerabilidade de uma base de dados
* [Conjunto AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Set-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) estabelece a base de regra de avaliação de vulnerabilidade.
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) obtém a linha de base de regra de avaliação de vulnerabilidade para uma determinada regra.
* [Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/azurerm.sql/Clear-AzureRmSqlDatabaseVulnerabilityAssessmentRuleBaseline?view=azurermps-6.6.0) limpa a linha de base de regra de avaliação de vulnerabilidade. Em primeiro lugar, defina a linha de base antes de utilizar este cmdlet de limpá-la.
* [Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Start-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) Aciona o início de uma análise de avaliação de vulnerabilidade
* [Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/azurerm.sql/Get-AzureRmSqlDatabaseVulnerabilityAssessmentScanRecord?view=azurermps-6.6.0) obtém os registos de análise de avaliação de vulnerabilidade todos os associados a um determinado banco de dados.
* [Converter AzureRmSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/azurerm.sql/Convert-AzureRmSqlDatabaseVulnerabilityAssessmentScan?view=azurermps-6.6.0) converte os resultados de verificações de avaliação de vulnerabilidade para um ficheiro do Excel


Para obter um exemplo de script, consulte [suporte do PowerShell de avaliação de vulnerabilidade de SQL do Azure](https://blogs.msdn.microsoft.com/sqlsecurity/2018/08/02/azure-sql-vulnerability-assessment-now-with-powershell-support/).


## <a name="next-steps"></a>Passos Seguintes  

- Saiba mais sobre [proteção contra ameaças avançadas do SQL](sql-advanced-threat-protection.md)
- Saiba mais sobre [dados de deteção e classificação](sql-database-data-discovery-and-classification.md)
