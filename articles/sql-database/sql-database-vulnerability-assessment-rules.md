---
title: Guia de referência de regras de avaliação de vulnerabilidade SQL
description: Lista de títulos de regras e descrições para SQL Server, Base de Dados Azure SQL, Instância Gerida Azure SQL e Azure Synapse Analytics
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.topic: reference
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 05/08/2020
ms.openlocfilehash: d754e27a889785c029b7bb6c7b537d00f63c066b
ms.sourcegitcommit: 999ccaf74347605e32505cbcfd6121163560a4ae
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 05/08/2020
ms.locfileid: "82984749"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Guia de referência de regras de avaliação de vulnerabilidade SQL

Este artigo lista o conjunto de regras incorporadas que são usadas para sinalizar vulnerabilidades de segurança e destacar desvios das melhores práticas, tais como configurações erradas, permissões excessivas e dados sensíveis desprotegidos. As regras baseiam-se nas melhores práticas da Microsoft e focam-se nos problemas de segurança que apresentam os maiores riscos para a sua base de dados e os seus dados valiosos. Eles cobrem ambos os problemas de nível de base de dados, bem como problemas de segurança ao nível do servidor, como definições de firewall do servidor e permissões ao nível do servidor. Estas regras representam também muitos dos requisitos de várias entidades reguladoras para cumprir as suas normas de conformidade.

As regras mostradas na sua base de dados dependem da versão E plataforma SQL que foi digitalizada. 

Para saber como implementar a Avaliação de Vulnerabilidade sintetizada em Azure, consulte a Avaliação de Vulnerabilidade de [Implementação.](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment#implement-vulnerability-assessment)

## <a name="rules"></a>Regras

|ID da Regra  |Título da Regra  |Categoria de Regras  |Gravidade da regra  |Descrição da regra  |Plataforma  |
|---------|---------|---------|---------|---------|---------|
| VA1017     |Executar permissões em xp_cmdshell de todos os utilizadores (exceto dbo) devem ser revogadas         |Autenticação e Autorização         |Alta         |O xp_cmdshell procedimento armazenado alargado gera uma concha de comando windows         |<nobr>SQL Server 2012+<sup>1</sup><nobr/>         |
| VA1018     |As últimas atualizações devem ser instaladas         |Atualizações e Patches de Instalação         |Alta         |A Microsoft lança periodicamente Atualizações Cumulativas (CUs) para cada versão do Servidor SQL. Esta regra verifica se a última UC foi instalada para a versão específica do SQL Server sendo usada, passando uma corda para execução. Esta regra verifica que todos os utilizadores (exceto dbo) não têm autorização para executar o xp_cmdshell procedimento armazenado alargado. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA1020     |O utilizador da base de dados GUEST não deve ser membro de qualquer papel         |Autenticação e Autorização         |Alta         |O utilizador convidado permite o acesso a uma base de dados para quaisquer logins que não estejam mapeados a um utilizador específico da base de dados. Esta regra verifica se não são atribuídas funções de base de dados ao utilizador convidado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1021     |Procedimentos globais de armazenamento temporário devem ser removidos         |Proteção de Dados         |Alta         |Um procedimento global temporário armazenado é visível para todas as sessões e é abandonado quando a sessão do utilizador que o criou está fechada. Esta regra verifica que não existem procedimentos globais armazenados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1022     |Consultas distribuídas ad hoc devem ser desativadas         |Redução da área da superfície         |Médio         |Consultas distribuídas ad hoc `OPENROWSET` `OPENDATASOURCE` usam as e funções para ligar a fontes de dados remotas que usam OLE DB. Esta regra verifica se as consultas distribuídas ad hoc são desativadas.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1023     |ClR deve ser desativado         |Redução da área da superfície         |Alta         |O CLR permite que o código gerido seja hospedado e executado no ambiente do Microsoft SQL Server. Esta regra verifica se o CLR está desativado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1026     |ClR deve ser desativado         |Redução da área da superfície         |Médio         |O CLR permite que o código gerido seja hospedado e executado no ambiente do Microsoft SQL Server. ClR rigorosa segurança trata conjuntos SAFE e EXTERNAL_ACCESS como se estivessem marcados INSEGUROS e exige que todos os conjuntos sejam assinados por um certificado ou chave assimétrica com um login correspondente que tenha sido concedido inseguro de autorização de MONTAGEM na base de dados principal. Esta regra verifica se o CLR está desativado.         |<nobr>SQL Server 2017+<sup>2</sup><nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1027     |Conjuntos fidedignos não rastreados devem ser removidos         |Redução da área da superfície         |Alta         |As assemblagens marcadas como INSEGUROS são obrigadas a ser assinadas por um certificado ou chave assimétrica com um login correspondente que tenha sido concedido inseguro na base de dados principal. As assembleias fidedignas podem contornar este requisito.          |<nobr>SQL Server 2017+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1042     |A cadeia de propriedade da base de `master`dados `msdb`deve ser desativada para todas as bases de dados, com exceção de , e`tempdb`         |Autenticação e Autorização         |Alta         |A cadeia de propriedade de bases de dados cruzadas é uma extensão da corrente de propriedade, exceto que atravessa os limites da base de dados. Esta regra verifica se esta opção é `master`desativada para todas as bases de dados, exceto para , `msdb`e `tempdb` . Para `master` `msdb`, `tempdb`e , corrente de propriedade de base de dados cruzada é ativado por padrão.        |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1043     |O PRINCIPAL CONVIDADO não deve ter acesso a qualquer base de dados de utilizadores         |Autenticação e Autorização         |Médio         |O utilizador convidado permite o acesso a uma base de dados para quaisquer logins que não estejam mapeados a um utilizador específico da base de dados. Esta regra verifica que o utilizador não pode ligar-se a nenhuma base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1044     |Ligações de administração remota devem ser desativadas         |Redução da área da superfície         |Médio         |O SQL Server fornece uma ligação de administrador dedicada (DAC). O DAC permite a um administrador aceder a um servidor de execução para executar funções de diagnóstico ou declarações Transact-SQL ou para resolver problemas no servidor. Esta regra verifica se as ligações administrativas dedicadas remotamente são desativadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1045     |O rastreio predefinido deve ser ativado         |Auditoria e Exploração Madeireira         |Médio         |O rastreio predefinido fornece assistência de resolução de problemas aos administradores da base de dados, garantindo que possuem os dados de registo necessários para diagnosticar problemas na primeira vez que ocorrem. Esta regra verifica se o vestígio predefinido está ativado.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1046     |CHECK_POLICY devem ser ativados para todos os logins SQL         |Autenticação e Autorização         |Baixa         |CHECK_POLICY opção permite verificar os logins SQL contra a política de domínio. Esta regra verifica que CHECK_POLICY opção está ativada para todos os logins SQL.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1047     |A verificação de validade da palavra-passe deve ser ativada para todos os logins SQL         |Autenticação e Autorização         |Baixa         |As políticas de expiração da palavra-passe são usadas para gerir o tempo de vida de uma palavra-passe. Quando o SQL Server aplica a política de expiração da palavra-passe, os utilizadores são lembrados para alterar palavras-passe antigas e as contas que tenham caducadas palavras-passe são desativadas. Esta regra verifica que a política de expiração da palavra-passe está ativada para todos os logins SQL.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1048     |Os diretores de bases de `sa` dados não devem ser mapeados para a conta         |Autenticação e Autorização         |Alta         |Um principal de base de `sa` dados que está mapeado para a conta pode ser explorado por um intruso para elevar permissões para`sysadmin`         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1051     |AUTO_CLOSE devem ser desativados em todas as bases de dados         |Redução da área da superfície         |Médio         |A opção AUTO_CLOSE especifica se a base de dados desliga de forma limpa e liberta recursos após a saída do último utilizador. Esta regra verifica se esta opção está desativada em todas as bases de dados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1052     |Remover os administradores builtin\como um login de servidor         |Autenticação e Autorização         |Baixa         |O grupo DE Administradores BUILTIN\Contém o grupo de Administradores Locais do Windows. Nas versões mais antigas do Microsoft SQL Server este grupo tem direitos de administrador por padrão. Esta regra verifica que este grupo é removido do Servidor SQL.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1053     |Conta com `sa` nome predefinido deve ser renomeada ou desativada         |Autenticação e Autorização         |Baixa         |`sa`é uma conta bem conhecida com id principal 1. Esta regra verifica `sa` que a conta é renomeada ou desativada         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1054     |Não devem ser concedidas permissões excessivas ao PAPEL PÚBLICO em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada login do SQL Server pertence ao papel do servidor público. Quando um diretor do servidor não tiver sido concedido ou negado permissões específicas num objeto titular, o utilizador herda as permissões concedidas ao público sobre esse objeto. Esta regra apresenta uma lista de todos os objetos ou colunas que são acessíveis a todos os utilizadores através do papel DO PÚBLICO.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1058     |`sa`login deve ser desativado         |Autenticação e Autorização         |Alta         |`sa`é uma conta bem conhecida com id principal 1. Esta regra verifica `sa` que a conta está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1059     |xp_cmdshell deve ser desativada         |Autenticação e Autorização         |Alta         |xp_cmdshell gera uma concha de comando windows e passa-lhe uma corda para execução. Esta regra verifica que xp_cmdshell está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1066     |Os pontos finais do corretor de serviçonão utilizados devem ser removidos         |Redução da área da superfície         |Baixa         |O Corretor de Serviços fornece mensagens de fila e fiáveis para o SQL Server. O Corretor de Serviços é utilizado tanto para aplicações que utilizam uma única instância do SQL Server como aplicações que distribuem trabalho em várias instâncias. Os pontos finais do Corretor de Serviços fornecem opções para a segurança do transporte e reencaminhamento de mensagens. Esta regra enumera todos os pontos finais do corretor de serviços. Retire os que não são utilizados.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1067     |Base de Dados Mail XPs devem ser desativados         |Autenticação e Autorização         |Médio         |O Database Mail é uma solução empresarial para o envio de mensagens de correio eletrónico a partir do Servidor SQL.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1068     |Permissões do servidor não devem ser concedidas diretamente aos diretores         |Autenticação e Autorização         |Baixa         |As permissões de nível do servidor estão associadas a um objeto de nível de servidor para regular quais os utilizadores que podem ter acesso ao objeto. Esta regra verifica que não existem permissões de nível de servidor concedidas diretamente aos logins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1069     |Permissões para selecionar a partir de tabelas e vistas do sistema devem ser revogadas de não-sysadmins         |Autenticação e Autorização         |Baixa         |As permissões não-sysadmina para selecionar a partir de tabelas e vistas do sistema existem fora da caixa e são normalmente usadas por ferramentas como SSMS. Esta regra enumera quais as tabelas e vistas do sistema que podem ser acedidas por não-sisadmins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1070     |Os utilizadores de bases de dados não devem partilhar o mesmo nome que um login de servidor         |Autenticação e Autorização         |Baixa         |Os utilizadores da base de dados podem partilhar o mesmo nome que um login do servidor. Esta regra valida que não existem tais utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1071     |Opção 'Scan for startup stored procedures' deve ser desativada         |Redução da área da superfície         |Médio         |Quando 'Scan for startup procs' estiver ativado, o SQL Server verifica e executa todos os procedimentos armazenados automaticamente definidos no servidor. Se esta opção estiver ativada, o SQL Server verifica e executa todos os procedimentos armazenados automaticamente definidos no servidor. Esta regra verifica se esta opção está desativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1072     |O modo de autenticação deve ser a autenticação do Windows         |Autenticação e Autorização         |Médio         |Existem dois modos de autenticação possíveis: modo de autenticação do Windows e modo misto. Modo misto significa que o Servidor SQL permite a autenticação do Windows e a autenticação do Servidor SQL. Esta regra verifica se o modo de autenticação está definido para a autenticação do Windows.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1091     |A auditoria das tentativas de login bem sucedidas e falhadas (rastreio de predefinição) deve ser ativada quando for criada a 'auditoria de login' para rastrear os logins         |Auditoria e Exploração Madeireira         |Baixa         |A configuração de auditoria de Login do Servidor SQL permite que os administradores rastreiem os utilizadores que iniciam sessão nas instâncias do Servidor SQL. Se o utilizador optar por contar com a 'auditoria de Login' para rastrear os utilizadores que iniciam sessão nas instâncias do SQL Server, então é importante capacitá-lo tanto para tentativas de login bem sucedidas como falhadas.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1092     |A instância do Servidor SQL não deve ser publicitada pelo serviço de navegador SQL Server         |Redução da área da superfície         |Baixa         |O SQL Server utiliza o serviço SQL Server Browser para enumerar as instâncias do Motor base de dados instalado no computador. Isto permite que as aplicações do cliente naveguem por um servidor e ajudam os clientes a distinguir entre várias instâncias do Motor base de dados no mesmo computador. Esta regra verifica se a instância SQL está escondida.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1093     |O número máximo de registos de erros deve ser de 12 ou mais         |Auditoria e Exploração Madeireira         |Baixa         |Cada registo de Erro do Servidor SQL terá todas as informações relacionadas com falhas/erros que ocorreram desde que o SQL Server foi reiniciado ou desde a última vez que reciclou os registos de erro. Esta regra verifica se o número máximo de registos de erros é de 12 ou mais.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1094     |Permissões de base de dados não devem ser concedidas diretamente aos diretores         |Autenticação e Autorização         |Baixa         |Permissões são regras associadas a um objeto securável para regular quais os utilizadores podem ter acesso ao objeto. Esta regra verifica que não existem permissões DB concedidas diretamente aos utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1095     |Não devem ser concedidas permissões excessivas ao PÚBLICO         |Autenticação e Autorização         |Médio         |Cada login do SQL Server pertence ao papel do servidor público. Quando um diretor do servidor não tiver sido concedido ou negado permissões específicas num objeto titular, o utilizador herda as permissões concedidas ao público sobre esse objeto. Para nós, o PÚBLICO apresenta uma lista de todas as autorizações que são concedidas ao PÚBLICO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1096     |O PRINCIPAL CONVIDADO não deve ser autorizado na base de dados         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica que todas as permissões foram revogadas do utilizador CONVIDADO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1097     |O CONVIDADO principal não deve ser autorizado em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica que todas as permissões foram revogadas do utilizador CONVIDADO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1098     |Qualquer ponto final Existente sSB ou Mirroring deve requerer ligação AES         |Proteção de Dados         |Alta         |O Corretor de Serviços e os pontos finais do Mirroring suportam diferentes algoritmos de encriptação, incluindo a não encriptação. Esta regra verifica que qualquer ponto final existente requer encriptação AES.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1099     |Utilizador convidado não deve ser autorizado em securáveis de base de dados         |Autenticação e Autorização         |Baixa         |Cada base de dados inclui um utilizador chamado GUEST. As permissões concedidas ao GUEST são herdadas por utilizadores que tenham acesso à base de dados mas que não tenham uma conta de utilizador na base de dados. Esta regra verifica que todas as permissões foram revogadas do utilizador CONVIDADO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1102     |A parte fidedigna deve ser desativada em todas as bases de dados, exceto mSDB         |Redução da área da superfície         |Alta         |A propriedade de base de dados FIDeDIGNA é usada para indicar se a instância do SQL Server confia na base de dados e nos conteúdos dentro dela. Se esta opção estiver ativada módulos de base de dados (por exemplo, funções definidas pelo utilizador ou procedimentos armazenados) que utilizem um contexto de personificação podem aceder a recursos fora da base de dados. Esta regra verifica que a bit FIDeDIGNA é desativada em todas as bases de dados, exceto mSDB.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1143     |O utilizador 'dbo' não deve ser utilizado para o funcionamento normal do serviço         |Redução da área da superfície         |Médio         |O 'dbo' ou proprietário de base de dados é uma conta de utilizador que tem permissões implícitas para realizar todas as atividades na base de dados. Os membros da função de servidor fixo sysadmin são automaticamente mapeados para dbo. Esta regra verifica que o dbo não é a única conta permitida para aceder a esta base de dados. Note que numa base de dados limpa recém-criada esta regra falhará até que sejam criadas funções adicionais.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1144     |A base de dados dos modelos só deve ser acessível por 'dbo'         |Redução da área da superfície         |Médio         |A base de dados do Modelo é usada como modelo para todas as bases de dados criadas na instância do Servidor SQL. As modificações feitas na base de dados do modelo, tais como o modelo de recuperação do tamanho da base de dados e outras opções de base de dados são aplicadas a quaisquer bases de dados criadas posteriormente. Esta regra verifica que o dbo é a única conta permitida para aceder à base de dados do modelo.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1219     |Encriptação de dados transparente deve ser ativada         |Proteção de Dados         |Médio         |A encriptação transparente de dados (TDE) ajuda a proteger contra a ameaça de atividade sucinta através da encriptação e desencriptação em tempo real das cópias de segurança associadas à base de dados e ficheiros de registo de transações 'em repouso' sem exigir alterações na aplicação. Esta regra verifica se o TDE está ativado na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1220     |A comunicação da base de dados utilizando TDS deve ser protegida através de TLS         |Proteção de Dados         |Alta         |O Microsoft SQL Server pode utilizar a Camada de Tomadas Seguras (SSL) ou a Segurança da Camada de Transporte (TLS) para encriptar dados transmitidos através de uma rede entre uma instância do Servidor SQL e uma aplicação de cliente. Esta regra verifica que todas as ligações ao Servidor SQL são encriptadas através de TLS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1221     |Chaves simétricas de encriptação de base de dados devem usar algoritmo AES         |Proteção de Dados         |Alta         |O SQL Server utiliza chaves de encriptação para ajudar a proteger as credenciais de dados e as informações de ligação que são armazenadas numa base de dados do servidor. O SQL Server tem dois tipos de teclas: simétrica e assimétrica. Esta regra verifica que as chaves simétricas de encriptação da base de dados usam o algoritmo AES.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1222     |As teclas de encriptação de nível celular devem usar algoritmo AES         |Proteção de Dados         |Alta         |A Encriptação ao Nível celular (CLE) permite encriptar os seus dados usando chaves simétricas e assimétricas. Esta regra verifica que as chaves simétricas de encriptação de nível celular usam algoritmo AES.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1223     |As chaves do certificado devem utilizar pelo menos 2048 bits         |Proteção de Dados         |Alta         |As chaves de certificado são usadas em RSA e outros algoritmos de encriptação para proteger dados. Estas teclas têm de ter comprimento suficiente para proteger os dados do utilizador. Esta regra verifica que o comprimento da chave é de, pelo menos, 2048 bits para todos os certificados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1224     |O comprimento das chaves assimétricas deve ser de pelo menos 2048 bits         |Proteção de Dados         |Alta         |Chaves assimétricas de base de dados são usadas em muitos algoritmos de encriptação estas chaves precisam de comprimento suficiente para proteger os dados encriptados esta regra verifica que todas as chaves assimétricas armazenadas na base de dados têm comprimento de pelo menos 2048 bits         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>SQL Database         |
|VA1229     |Definição de filestream no registo e na configuração do Servidor SQL deve corresponder         |Redução da área da superfície         |Alta         |Existem duas definições que regem a opção Filestream uma no registo (nível DE Os) e uma na configuração do Servidor SQL. Esta regra verifica se as duas configurações coincidem.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1230     |O filestream deve ser desativado         |Redução da área da superfície         |Alta         |Filestream integra o Motor de Base de Dados do Servidor SQL com um sistema de ficheiros NTFS armazenando dados binários binários (BLOB) de objeto sobinário (BLOB) como ficheiros no sistema de ficheiros. As declarações transact-SQL podem inserir a pesquisa de consulta de atualização e o back up filestream dados. Esta regra verifica se o Filestream está desativado.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1231     |O filestream deve ser desativado (SQL)         |Redução da área da superfície         |Alta         |Filestream integra o Motor de Base de Dados do Servidor SQL com um sistema de ficheiros NTFS armazenando dados binários binários (BLOB) de objeto sobinário (BLOB) como ficheiros no sistema de ficheiros. As declarações transact-SQL podem inserir a pesquisa de consulta de atualização e o back up filestream dados. Esta regra verifica que a opção específica Filestream SQL é desativada         |<nobr>SQL Server 2012+<nobr/>          |
|VA1234     |A definição de critérios comuns deve ser ativada         |Auditoria e Exploração Madeireira         |Baixa         |A definição de critérios comuns permite a definição de vários elementos e comportamentos que são necessários para o cumprimento de critérios comuns. Esta regra verifica se esta opção está ativada. Note que esta opção não está disponível na edição padrão. Para mais detalhes visite: [Configuração do servidor ativada por critérios comuns](/sql/database-engine/configure-windows/common-criteria-compliance-enabled-server-configuration-option) e recursos do [servidor SQL](https://www.microsoft.com/cloud-platform/sql-server-Resources).        |<nobr>SQL Server 2012+<nobr/>          |
|VA1235     |Os XPs de replicação devem ser desativados         |Redução da área da superfície         |Médio         |Desativar a área de superfície de ataque de XPs de replicação         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1244     |Utilizadores órfãos devem ser removidos das bases de dados do servidor SQL         |Redução da área da superfície         |Médio         |Um utilizador de base de dados que existe numa base de dados mas não tem registo correspondente na base de dados principal ou como recurso externo (por exemplo, um utilizador do Windows) é referido como um utilizador órfão e deve ser removido ou remapeado para um login válido. Esta regra verifica que não há utilizadores órfãos.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1245     |A informação dbo deve ser consistente entre o alvo DB e o mestre         |Redução da área da superfície         |Alta         |Existem informações redundantes sobre a identidade dbo para qualquer base de dados: metadados armazenados na própria base de dados e metadados armazenados no master DB. Esta regra verifica que esta informação é consistente entre o alvo DB e o mestre.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1246     |As funções de aplicação não devem ser utilizadas         |Autenticação e Autorização         |Baixa         |Uma função de aplicação é um principal de base de dados que permite que uma aplicação seja executada com as suas próprias permissões semelhantes ao utilizador. As funções de aplicação permitem que apenas os utilizadores que se conectam através de uma determinada aplicação possam aceder a dados específicos. As funções de aplicação são baseadas em palavras-passe (que aplicações normalmente hardcode) e não com base em permissão que expõe a base de dados à personificação do papel da aplicação através da adivinhação de palavras-passe. Esta regra verifica se não existem funções de aplicação definidas na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database         |
|VA1247     |Não deve haver SPs marcados como auto-arranque         |Redução da área da superfície         |Alta         |Quando o SQL Server tiver sido configurado para 'digitalizar para procs de arranque', o servidor irá digitalizar o master DB para procedimentos armazenados marcados como arranque automático. Esta regra verifica que não há SPs marcados como auto-arranque.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1248     |Funções de base de dados definidas pelo utilizador não devem ser membros de funções fixas         |Autenticação e Autorização         |Médio         |Para gerir facilmente as permissões nas suas bases de dados, o SQL Server fornece várias funções, que são diretores de segurança que agrupam outros diretores. São como grupos no sistema operativo Microsoft Windows. As contas de base de dados e outras funções do Servidor SQL podem ser adicionadas em funções de nível de base de dados. Cada membro de uma função de base de dados fixa pode adicionar outros utilizadores a essa mesma função. Esta regra verifica que nenhuma função definida pelo utilizador são membros de funções fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1252     |Lista de eventos a ser auditado e gerido centralmente através de especificações de auditoria do servidor.         |Auditoria e Exploração Madeireira         |Baixa         |A auditoria de uma instância do Motor de Base de Dados do Servidor SQL ou de uma base de dados individual envolve rastreio e registo de eventos que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista de eventos que estão a ser auditados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1253     |Lista de eventos com âmbito db que estão a ser auditados e geridos centralmente através de especificações de auditoria do servidor         |Auditoria e Exploração Madeireira         |Baixa         |A auditoria de uma instância do Motor de Base de Dados do Servidor SQL ou de uma base de dados individual envolve rastreio e registo de eventos que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista completa de todos os eventos atualmente a ser auditados (isto é, ligados a uma auditoria que está ativada) que são geridos por DB-specific.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1256     |Os conjuntos CLR do utilizador não devem ser definidos na base de dados         |Redução da área da superfície         |Alta         |Os conjuntos CLR podem ser utilizados para executar código arbitrário no processo Do Servidor SQL. Esta regra verifica se não existem conjuntos CLR definidos pelo utilizador na base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1258     |Os proprietários de bases de dados são como esperado         |Auditoria e Exploração Madeireira         |Alta         |Os proprietários de bases de dados podem realizar todas as atividades de configuração e manutenção na base de dados e também podem deixar cair bases de dados no Servidor SQL. Rastrear os proprietários de bases de dados é importante para evitar ter permissão excessiva para alguns diretores. Crie uma linha de base que defina os proprietários de bases de dados esperados para a base de dados. Esta regra verifica se os proprietários da base de dados estão definidos na linha de base.         |<nobr>SQL Server 2016+<sup>3</sup><nobr/><br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1263     |Enumerar todas as auditorias ativas no sistema         |Auditoria e Exploração Madeireira         |Baixa         |A auditoria de uma instância do Motor de Base de Dados do Servidor SQL ou de uma base de dados individual envolve rastreio e registo de eventos que ocorrem no Motor de Base de Dados. Esta regra apresenta uma lista completa de todos os eventos atualmente em auditoria (por exemplo, ligados a uma auditoria que está ativada).         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1264     |A auditoria das tentativas de login bem sucedidas e falhadas deve ser ativada         |Auditoria e Exploração Madeireira         |Baixa         |A configuração de auditoria do SQL Server permite que os administradores rastreiem os utilizadores que iniciam o registo em instâncias do Servidor SQL pelas quais são responsáveis. Esta regra verifica que a auditoria está ativada para tentativas de login bem sucedidas e falhadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1265     |A auditoria das tentativas de login bem sucedidas e falhadas para a autenticação DB contida deve ser ativada         |Auditoria e Exploração Madeireira         |Médio         |A configuração de auditoria do SQL Server permite que os administradores rastreiem os utilizadores que iniciam o registo nas instâncias do SQL Server pelas quais são responsáveis. Esta regra verifica que a auditoria está ativada para tentativas de login bem sucedidas e falhadas para a autenticação DB contida.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1266     |A opção 'MUST_CHANGE' deve ser definida em todos os logins SQL         |Autenticação e Autorização         |Baixa         |Se MUST_CHANGE opção for definida num Servidor SQL de login, será necessário estabelecer uma nova senha na primeira vez que o login é utilizado para autenticação. Esta regra verifica se esta opção está definida em todos os logins.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1267     |Os utilizadores contidos devem utilizar a autenticação do Windows         |Autenticação e Autorização         |Médio         |Os utilizadores contidos são utilizadores que existem dentro da base de dados e não necessitam de um mapeamento de login. Esta regra verifica que os utilizadores contidos utilizam a Autenticação do Windows.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1276     |A função De Agente XPs deve ser desativada         |Auditoria e Exploração Madeireira         |Médio         |O SQL Server Agent é um serviço Microsoft Windows que executa tarefas administrativas programadas no Servidor SQL. Os XPs do Agente são procedimentos armazenados alargados utilizados pelo Agente servidor SQL que fornecem ações privilegiadas que funcionam externamente ao DBMS no contexto de segurança da conta de serviço do Agente de ServidorEs SQL. Esta regra verifica se a função Agent XPs está desativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1277     |Encriptação da rede Polybase deve ser ativada         |Redução da área da superfície         |Alta         |PolyBase é uma tecnologia que acede e combina dados não relacionais e relacionais, todos a partir de Dentro do Servidor SQL. A opção de encriptação da rede Polybase configura o SQL Server para encriptar os canais de controlo e dados ao utilizar a Polybase. Esta regra verifica que esta opção está ativada.         |<nobr>SQL Server 2016+<nobr/>         |
|VA1278     |Criar uma linha de base de Fornecedores de Gestão de Chaves Externas         |Redução da área da superfície         |Médio         |O SQL Server Extensible Key Management (EKM) permite que os fornecedores de módulos de segurança EKM/Hardware (HSM) de terceiros registem os seus módulos no Servidor SQL. Quando os utilizadores do SQL Server registados podem utilizar as chaves de encriptação armazenadas nos módulos EKM. Esta regra apresenta uma lista de fornecedores EKM que estão a ser utilizados no sistema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1279     |A encriptação da força deve ser ativada para TDS         |Proteção de Dados         |Alta         |Quando a opção de encriptação da força para o Motor base de dados estiver ativada todas as comunicações entre o cliente e o servidor são encriptadas independentemente de a opção de "encriptar a ligação" (como por exemplo o SSMS) ser verificada ou não. Esta regra verifica que a opção de encriptação da força está ativada.         |<nobr>SQL Server 2012+<nobr/>         |
|VA1280     |Permissões do servidor concedidas ao público devem ser minimizadas         |Autenticação e Autorização         |Médio         |Cada login do SQL Server pertence ao papel do servidor público. Quando um diretor do servidor não tiver sido concedido ou negado permissões específicas num objeto titular, o utilizador herda as permissões concedidas ao público sobre esse objeto. Esta regra verifica que as permissões do servidor concedidas ao público são minimizadas.          |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1281     |Todas as adesões para funções definidas pelo utilizador devem ser destinadas         |Auditoria e Exploração Madeireira         |Médio         |As funções definidas pelo utilizador são princípios de segurança definidos pelo utilizador para os diretores de grupo para gerir facilmente permissões. O acompanhamento destas funções é importante para evitar ter permissões excessivas. Crie uma linha de base que defina a adesão esperada para cada função definida pelo utilizador. Esta regra verifica se todos os membros para funções definidas pelo utilizador são definidos na linha de base.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1282     |Os papéis órfãs devem ser removidos         |Autenticação e Autorização         |Baixa         |Os papéis órfãos são papéis definidos pelo utilizador que não têm membros. Eliminar papéis órfãos, uma vez que não são necessários no sistema. Esta regra verifica se há papéis órfãos.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1283     |Deve haver pelo menos 1 auditoria ativa no sistema         |Auditoria e Exploração Madeireira         |Baixa         |A auditoria de uma instância do Motor de Base de Dados do Servidor SQL ou de uma base de dados individual envolve rastreio e registo de eventos que ocorrem no Motor de Base de Dados. O objeto De Auditoria do Servidor SQL recolhe uma única instância de ações de servidor ou de nível de base de dados e grupos de ações para monitorizar. Esta regra verifica que existe pelo menos uma auditoria ativa no sistema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1286     |As permissões da base de dados não devem ser concedidas diretamente aos diretores (OBJECT ou COLUNA)         |Autenticação e Autorização         |Baixa         |Permissões são regras associadas a um objeto securável para regular quais os utilizadores podem ter acesso ao objeto. Esta regra verifica que não existem permissões DB concedidas diretamente aos utilizadores.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA1288     |Colunas de dados sensíveis devem ser classificadas         |Proteção de Dados         |Médio         |Esta regra descobre e caracteriza dados potencialmente sensíveis na base de dados. O resultado é uma recolha de colunas de base de dados sensíveis, que devem ser revistas e classificadas utilizando a SQL Data Discovery & Classification. Isto permite que as colunas de base de dados sejam rotuladas persistentemente de acordo com a sua sensibilidade, o que permite rastrear (auditoria) a utilização de dados classificados e a criação de relatórios. Se as suas colunas de base de dados sensíveis estiverem desprotegidas, deve também considerar aplicar uma das capacidades de segurança incorporadas da SQL Database para restringir o acesso e proteger os seus dados sensíveis.         |<nobr/>SQL Database         |
|VA2000     |O conjunto mínimo de princípios deve ser concedido permissões de alto impacto com base de dados         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de alto impacto com base de dados de alto impacto.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2001     |Deve ser concedido um conjunto mínimo de princípios com permissões de alto impacto com base de dados em objetos ou colunas         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões de alto impacto com base de dados em objetos ou colunas.        |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2002     |O conjunto mínimo de princípios deve ser concedido permissões de alto impacto com base de dados em várias securáveis         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões de alto impacto com base de dados em vários securáveis.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2010     |O conjunto mínimo de princípios deve ser concedido permissões de base de dados de impacto médio         |Autenticação e Autorização         |Médio         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido a permissões de base de dados de impacto médio.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2020     |O conjunto mínimo de princípios deve ser concedido ALTER ou ALTERAR quaisquer permissões com o código de base de dados do UTILIZADOR         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido ALTER ou ALTER Quaisquer permissões com o código de base de dados do UTILIZADOR.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2021     |O conjunto mínimo de princípios deve ser concedido permissões ALTER com um espaço de base de dados em objetos ou colunas         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões com base de dados ALTER em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2022     |O conjunto mínimo de princípios deve ser concedido permissão ALTER com um espaço de base de dados em várias securáveis         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões ALTER com um espaço de base de dados em várias securáveis.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2030     |O conjunto mínimo de princípios deve ser concedido permissões SELECT ou EXECUTE com um padrão de base de dados         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido a permissões SELECT ou EXECUTE com um padrão de base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2031     |O conjunto mínimo de princípios deve ser concedido select com um selectde com um alcance de base de dados          |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissão SELECT com um padrão de base de dados em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2032     |O conjunto mínimo de princípios deve ser concedido permissões SELECT ou EXECUTE com um padrão de base de dados em esquemas         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido a penas select ou EXECUT em esquema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2033     |O conjunto mínimo de princípios deve ser concedido permissão execute com um padrão de base de dados em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissão execute com um padrão de base de dados em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2034     |O conjunto mínimo de princípios deve ser concedido permissão execute com um padrão de base de dados na XML Schema Collection         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissão EXECUTE com um padrão de base de dados na XML Schema Collection.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database         |
|VA2040     |O conjunto mínimo de princípios deve ser concedido permissões de base de dados de baixo impacto         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de baixo impacto com base de dados de baixo impacto.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2041     |O conjunto mínimo de princípios deve ser concedido permissões de base de dados de baixo impacto em objetos ou colunas         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de baixo impacto com base de dados em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse          |
|VA2042     |O conjunto mínimo de princípios deve ser concedido permissões de base de dados de baixo impacto em esquemas         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios recebe permissões de baixo impacto com base de dados em esquema.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse          |
|VA2050     |O conjunto mínimo de princípios deve ser concedido permissões DE DEFINIÇÃO VIEW com um padrão de base de dados         |Autenticação e Autorização         |Médio         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões VIEW DEFINITION com um padrão de base de dados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse          |
|VA2051     |O conjunto mínimo de princípios deve ser concedido permissões DE DEFINIÇÃO DE VISÃO com visão de base de dados em objetos ou colunas         |Autenticação e Autorização         |Médio         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido permissões DE DEFINIÇÃO DE VISÃO com visão de base de dados em objetos ou colunas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse          |
|VA2052     |O conjunto mínimo de princípios deve ser concedido permissão de DEFINIÇÃO DE VISÃO com visão de base de dados em várias securáveis         |Autenticação e Autorização         |Médio         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de princípios é concedido a uma autorização de DEFINIÇÃO DE VISÃO com um padrão de base de dados em várias securáveis.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse          |
|VA2060     |Deteção de ameaças SQL deve ser ativada ao nível do servidor         |Proteção de Dados         |Médio         |A Deteção de Ameaças SQL fornece uma camada de segurança que deteta potenciais vulnerabilidades e atividade anómala em bases de dados como ataques de injeção SQL e padrões de comportamento incomuns. Quando uma ameaça potencial é detetada Deteção de Ameaças envia um alerta em tempo real por e-mail e no Centro de Segurança Azure, que inclui passos claros de investigação e reparação para a ameaça específica. Para mais informações, consulte a [deteção de ameaças configurar](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection). Esta verificação verifica que a Deteção de Ameaças SQL está ativada         |<nobr/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2061     |A auditoria deve ser ativada ao nível do servidor         |Auditoria e Exploração Madeireira         |Alta         |A auditoria da Base de Dados Azure SQL rastreia os eventos da base de dados e escreve-os num registo de auditoria na sua conta de armazenamento Azure. A auditoria ajuda-o a compreender a atividade da base de dados e a obter informações sobre discrepâncias e anomalias que possam indicar preocupações comerciais ou suspeitas de violações de segurança, bem como ajudá-lo a cumprir o cumprimento regulamentar. Para mais informações, consulte [a Auditoria Azure SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing). Esta regra verifica que a auditoria está ativada.         |<nobr/>SQL Database<br/><br/>Azure Synapse          |
|VA2062     |Regras de firewall ao nível da base de dados não devem conceder acesso excessivo         |Redução da área da superfície         |Alta         |A firewall de nível de base de dados Azure SQL ajuda a proteger os seus dados, impedindo todo o acesso à sua base de dados até especificar quais os endereços IP que têm permissão. As regras de firewall de nível de base de dados concedem acesso à base de dados específica com base no endereço IP originário de cada pedido.  As regras de firewall ao nível da base de dados para bases de dados master e utilizador só podem ser criadas e geridas através do Transact-SQL (ao contrário das regras de firewall ao nível do servidor, que também podem ser criadas e geridas através do portal Azure ou PowerShell). Para mais informações, consulte as regras de [firewall IP Azure SQL e Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Esta verificação verifica que as regras de firewall ao nível da base de dados não concedem acesso excessivo.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2063     |As regras de firewall ao nível do servidor não devem conceder acesso excessivo         |Redução da área da superfície         |Alta         |A firewall de nível de servidor Azure SQL ajuda a proteger o servidor, impedindo todo o acesso às suas bases de dados até especificar quais os endereços IP que têm permissão. As regras de firewall ao nível do servidor concedem acesso a todas as bases de dados que pertencem ao servidor com base no endereço IP originário de cada pedido.  As regras de firewall ao nível do servidor só podem ser criadas e geridas através da Transact-SQL, bem como através do portal Azure ou PowerShell. Para mais informações, consulte as regras de [firewall IP Azure SQL e Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Esta verificação verifica que as regras de firewall ao nível do servidor não concedem acesso excessivo.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2064     |As regras de firewall ao nível da base de dados devem ser rastreadas e mantidas a um mínimo rigoroso         |Redução da área da superfície         |Alta         |A firewall de nível de base de dados Azure SQL ajuda a proteger os seus dados, impedindo todo o acesso à sua base de dados até especificar quais os endereços IP que têm permissão. As regras de firewall de nível de base de dados concedem acesso à base de dados específica com base no endereço IP originário de cada pedido. As regras de firewall ao nível da base de dados para bases de dados master e utilizador só podem ser criadas e geridas através do Transact-SQL (ao contrário das regras de firewall ao nível do servidor, que também podem ser criadas e geridas através do portal Azure ou PowerShell). Para mais informações, consulte as regras de [firewall IP Azure SQL e Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Este controlo enumera todas as regras de firewall ao nível da base de dados para que quaisquer alterações feitas às mesmas possam ser identificadas e abordadas.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2065     |As regras de firewall ao nível do servidor devem ser rastreadas e mantidas a um mínimo rigoroso         |Redução da área da superfície         |Alta         |A firewall de nível de servidor Azure SQL ajuda a proteger os seus dados, impedindo todo o acesso às suas bases de dados até especificar quais os endereços IP que têm permissão. As regras de firewall ao nível do servidor concedem acesso a todas as bases de dados que pertencem ao servidor com base no endereço IP originário de cada pedido.  As regras de firewall ao nível do servidor podem ser criadas e geridas através da Transact-SQL, bem como através do portal Azure ou PowerShell. Para mais informações, consulte as regras de [firewall IP Azure SQL e Azure Synapse Analytics](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).  Esta verificação enumera todas as regras de firewall ao nível do servidor para que quaisquer alterações feitas às mesmas possam ser identificadas e endereçadas.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2100     |O conjunto mínimo de princípios deve ser concedido permissões de alto impacto com o servidor         |Autenticação e Autorização         |Alta         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de diretores é concedido permissões de alto impacto do servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2101     |O conjunto mínimo de princípios deve ser concedido permissões de servidor de impacto médio         |Autenticação e Autorização         |Médio         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de diretores é concedido permissões de servidor de impacto médio.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2102     |O conjunto mínimo de princípios deve ser concedido permissões de baixo impacto com o servidor         |Autenticação e Autorização         |Baixa         |Todos os SQL Server securable têm permissões associadas a ele que podem ser concedidas aos diretores. As permissões podem ser consultadas ao nível do servidor (atribuídas a funções de login e servidor) ou ao nível da base de dados (atribuídas aos utilizadores da base de dados e funções de base de dados). Estas regras verificam que apenas um conjunto mínimo de diretores recebe permissões de baixo impacto com o servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2103     |Devem ser revogadas permissões de execução desnecessárias em procedimentos armazenados alargados         |Autenticação e Autorização         |Médio         |Os procedimentos armazenados alargados são DLLs que uma instância de SQL Server pode carregar e executar dinamicamente. O SQL Server é embalado com muitos procedimentos armazenados alargados que permitem a interação com os DLLs do sistema. Esta regra verifica que foram revogadas permissões de execução desnecessárias em procedimentos armazenados alargados.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2104     |Executar permissões em procedimentos armazenados alargados deve ser revogado do PÚBLICO         |Autenticação e Autorização         |Médio         |Os procedimentos armazenados alargados são DLLs que uma instância de SQL Server pode carregar e executar dinamicamente. O SQL Server é embalado com muitos procedimentos armazenados alargados que permitem a interação com os DLLs do sistema. Esta regra verifica que não são concedidas permissões de execução desnecessárias ao PÚBLICO.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2105     |A senha de login não deve ser facilmente adivinhada         |Autenticação e Autorização         |Alta         |Esta regra verifica que as senhas de login não são facilmente adivinhadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2107     |O conjunto mínimo de princípios deve ser membros de funções de base de dados master Azure SQL DB fixas         |Autenticação e Autorização         |Alta         |A Base de Dados SQL fornece duas funções administrativas restritas na base de dados principal a que as contas dos utilizadores podem ser adicionadas que concedem permissões para criar bases de dados ou gerir logins. Esta regra verifica que um conjunto mínimo de princípios são membros destas funções administrativas.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2108     |O conjunto mínimo de princípios deve ser membros de funções fixas de base de dados de alto impacto         |Autenticação e Autorização         |Alta         |O SQL Server fornece funções para ajudar a gerir as permissões. As funções são diretores de segurança que agrupam outros diretores. As funções de nível de base de dados são em toda a base de dados no seu âmbito de permissão. Esta regra verifica que um conjunto mínimo de princípios são membros das funções de base de dados fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2109     |O conjunto mínimo de princípios deve ser membros de funções de base de dados fixas de baixo impacto         |Autenticação e Autorização         |Baixa         |O SQL Server fornece funções para ajudar a gerir as permissões. As funções são diretores de segurança que agrupam outros diretores. As funções de nível de base de dados são em toda a base de dados no seu âmbito de permissão. Esta regra verifica que um conjunto mínimo de princípios são membros das funções de base de dados fixas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2110     |Executar permissões para aceder ao registo deve ser revogada         |Autenticação e Autorização         |Alta         |Os procedimentos armazenados alargados permitem que o Microsoft SQL Server leia valores e teclas de escrita e enumeração no registo. São utilizados pelo Enterprise Manager para configurar o servidor. Esta regra verifica que as permissões para executar procedimentos armazenados alargados foram revogadas de todos os utilizadores (com além do dbo).         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2111     |As bases de dados da amostra devem ser removidas         |Redução da área da superfície         |Baixa         |O Microsoft SQL Server vem enviado com várias bases de dados de amostras. Esta regra verifica se as bases de dados da amostra foram removidas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2112     |As autorizações do PÚBLICO para os Serviços de Transformação de Dados (DTS) devem ser revogadas         |Autenticação e Autorização         |Médio         |Os Serviços de Transformação de Dados (DTS) são um conjunto de objetos e utilitários que permitem a automatização das operações de Extração Transform e Load (ETL) de ou para uma base de dados. Os objetos são pacotes DTS e seus componentes e os utilitários são chamados ferramentas DTS. Esta regra verifica que foram revogadas as autorizações para que o PÚBLICO utilize os procedimentos armazenados pelo sistema DTS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2113     |As permissões dos Serviços de Transformação de Dados (DTS) só devem ser concedidas às funções SSIS         |Autenticação e Autorização         |Médio         |Os Serviços de Transformação de Dados (DTS) são um conjunto de objetos e utilitários que permitem a automatização de operações de transformação e carga de extrato de ou a partir de uma base de dados. Os objetos são pacotes DTS e seus componentes e os utilitários são chamados ferramentas DTS. Esta regra verifica que apenas as funções SSIS são concedidas permissões para utilizar os procedimentos armazenados pelo sistema DTS.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2114     |O conjunto mínimo de princípios deve ser membros de funções fixas de servidor de alto impacto         |Autenticação e Autorização         |Alta         |O SQL Server fornece funções para ajudar a gerir permissões. As funções são diretores de segurança que agrupam outros diretores. As funções ao nível do servidor são de âmbito de permissão. Esta regra verifica que um conjunto mínimo de diretores são membros das funções fixas do servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2115     |O conjunto mínimo de princípios deve ser membros de funções fixas de servidor de impacto médio         |Autenticação e Autorização         |Médio         |O SQL Server fornece funções para ajudar a gerir permissões. As funções são diretores de segurança que agrupam outros diretores. As funções ao nível do servidor são de âmbito de permissão. Esta regra verifica que um conjunto mínimo de diretores são membros das funções fixas do servidor.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2120     |As funcionalidades que podem afetar a segurança devem ser desativadas         |Redução da área da superfície         |Alta         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços fornecidos por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. Esta regra verifica se estas funcionalidades estão desativadas.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2121     | A função 'Procedimentos de Automação OLE' deve ser desativada        |Redução da área da superfície         |Alta         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços, fornecidos por defeito, podem não ser necessários, e permitir-lhes afetar negativamente a segurança do sistema. A opção OLE Automation Procedures controla se os objetos de Automação OLE podem ser instantâneos dentro dos lotes Transact-SQL. Estes são procedimentos armazenados alargados que permitem aos utilizadores do SQL Server executar funções externas ao Servidor SQL. Independentemente dos seus benefícios, também pode ser usado para explorações e é conhecido como um mecanismo popular para plantar ficheiros nas máquinas-alvo. É aconselhável utilizar o PowerShell como substituto desta ferramenta. Esta regra verifica se a funcionalidade "Procedimentos de Automação OLE" está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2122     |A função 'Opções de Utilizador' deve ser desativada         |Redução da área da superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços fornecidos por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. As opções de utilizador especificam incumprimentos globais para todos os utilizadores. É estabelecida uma lista de opções de processamento de consulta padrão durante a sessão de trabalho de um utilizador. As opções do utilizador permitem alterar os valores predefinidos das opções SET (se as definições padrão do servidor não forem adequadas). Esta regra verifica se a funcionalidade "opções de utilizador" está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2123     |A função 'Acesso Remoto' deve ser desativada         |Redução da área da superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços fornecidos por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. A opção de acesso remoto controla a execução de procedimentos armazenados locais em servidores remotos ou procedimentos armazenados à distância no servidor local. Esta regra verifica que a função de "acesso remoto" está desativada.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância         |
|VA2126     |As funcionalidades que podem afetar a segurança devem ser desativadas         |Redução da área da superfície         |Médio         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços fornecidos por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. Esta regra verifica se estas funcionalidades estão desativadas.         |<nobr>SQL Server 2016+<nobr/>         |
|VA2127     |A função 'Scripts Externos' deve ser desativada         |Redução da área da superfície         |Alta         |O SQL Server é capaz de fornecer uma vasta gama de funcionalidades e serviços. Algumas das funcionalidades e serviços fornecidos por defeito podem não ser necessários e permitir-lhes afetar negativamente a segurança do sistema. A opção 'Scripts Externos activado' permite a execução de scripts com determinadas extensões de linguagem remota. Esta regra verifica se a função 'Scripts Externos Activado' está desativada.         |<nobr>SQL Server 2016+<nobr/>         |
|VA2128     |A Avaliação de Vulnerabilidade não é suportada para versões SQL Server inferiores às do SQL Server 2012         |Atualizações e Patches de Instalação         |Alta         |Para eexecutar uma avaliação de vulnerabilidade no seu Servidor SQL, o servidor precisa de ser atualizado para O Servidor SQL 2012 ou superior, o SQL Server 2008 R2 e abaixo já não são suportados pela Microsoft. Para mais informações, consulte <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Gerido <br/>Instância<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2129     |As alterações aos módulos assinados devem ser autorizadas         |Autenticação e Autorização         |Alta         |Pode assinar um procedimento, função ou gatilho armazenado com um certificado ou uma chave assimétrica. Isto é projetado para cenários em que as permissões não podem ser herdadas através da corrente de propriedade ou quando a cadeia de propriedade é quebrada, como o SQL dinâmico. Esta regra verifica as alterações feitas aos módulos assinados, o que pode ser uma indicação de uso malicioso.         |<nobr>SQL Server 2012+<nobr/><br/><br/>SQL Database         |
|VA2130     |Acompanhe todos os utilizadores com acesso à base de dados         |Autenticação e Autorização         |Baixa         |Os utilizadores devem receber permissões de acordo com o princípio do menor privilégio - Cada utilizador deve receber o conjunto mínimo de permissões necessárias para o seu papel. Isto verifica a todos os utilizadores com acesso a uma base de dados. Verifique se estes utilizadores estão autorizados de acordo com o seu papel atual na organização. As informações de permissões neste cheque podem suportar um processo de Revisão de Acesso ao Utilizador para a base de dados.         |<nobr>Base de Dados SQL<nobr/><br/><br/>Azure Synapse         |

<sup>1</sup> **SQL Server 2012+** refere-se a todas as versões do SQL Server 2012 ou superior.

<sup>2</sup> **SQL Server 2017+** refere-se a todas as versões do SQL Server 2017 ou acima.

<sup>3</sup> **SQL Server 2016+** refere-se a todas as versões do SQL Server 2016 ou acima.

## <a name="next-steps"></a>Passos seguintes

- [Avaliação de vulnerabilidades](sql-vulnerability-assessment.md)
