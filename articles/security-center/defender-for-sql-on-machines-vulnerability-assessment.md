---
title: Utilizando o scanner integrado de avaliação de vulnerabilidade do Azure Security Center para servidores SQL
description: Saiba mais sobre o Azure Defender para servidores SQL no scanner integrado de avaliação de vulnerabilidades das máquinas
author: memildin
ms.author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 04/09/2021
ms.openlocfilehash: 463be57632b1530994ef43ccd281d187e03070de
ms.sourcegitcommit: 425420fe14cf5265d3e7ff31d596be62542837fb
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 04/20/2021
ms.locfileid: "107739661"
---
# <a name="using-the-integrated-vulnerability-assessment-scanner-for-your-sql-servers"></a>Utilizando o scanner integrado de avaliação de vulnerabilidades para os seus servidores SQL

**O Azure Defender para servidores SQL em máquinas** alarga as proteções para os seus SqL Servers nativos do Azure para suportar totalmente ambientes híbridos e proteger servidores SQL (todas as versões suportadas) hospedados em Azure, outros ambientes em nuvem e até mesmo máquinas no local:
- [SQL Server nas Máquinas Virtuais](https://azure.microsoft.com/services/virtual-machines/sql-server/)
- Servidores SQL no local:
  - [SQL Server preparado para Azure Arc (pré-visualização)](/sql/sql-server/azure-arc/overview)
  - [SQL Server em funcionamento em máquinas Windows sem Arco Azure](../azure-monitor/agents/agent-windows.md)

O scanner integrado [de avaliação de vulnerabilidades](../azure-sql/database/sql-vulnerability-assessment.md) descobre, rastreia e ajuda-o a corrigir potenciais vulnerabilidades de base de dados. Os resultados das análises fornecem uma visão geral do estado de segurança das suas máquinas SQL e detalhes de quaisquer resultados de segurança.

## <a name="explore-vulnerability-assessment-reports"></a>Explore relatórios de avaliação de vulnerabilidades

O serviço de avaliação de vulnerabilidades verifica as suas bases de dados uma vez por semana. As tomografias são executadas no mesmo dia da semana em que ativou o serviço.

O painel de avaliação de vulnerabilidades fornece uma visão geral dos resultados da sua avaliação em todas as suas bases de dados, juntamente com um resumo de bases de dados saudáveis e pouco saudáveis, e um resumo geral de verificações falhadas de acordo com a distribuição de riscos.

Pode ver os resultados da avaliação da vulnerabilidade diretamente do Centro de Segurança.

1. Da barra lateral do Centro de Segurança, abra a página **recomendações.**

1. Selecione as conclusões de avaliação de vulnerabilidade de recomendação **nos seus servidores SQL em máquinas devem ser remediadas (Pré-visualização)**. Para mais informações, consulte a página de referência das [recomendações do Centro de Segurança.](security-center-recommendations.md) 

    :::image type="content" source="./media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png" alt-text="As conclusões da Avaliação de Vulnerabilidade nos seus servidores SQL em máquinas devem ser remediadas (Pré-visualização)":::

    A opinião pormenorizada desta recomendação aparece.

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/sql-vulnerability-findings.png" alt-text="Visão detalhada da recomendação":::

1. Para mais detalhes, desacaia:

    - Para uma visão geral dos recursos digitalizados (bases de dados) e da lista de verificações de segurança que foram testadas, abra os **recursos afetados** e selecione o servidor de interesse.

    - Para uma visão geral das vulnerabilidades agrupadas por uma base de dados SQL específica, selecione a base de dados de interesses.

    Em cada vista, os controlos de segurança são classificados pela **Severidade**. Selecione uma verificação de segurança específica para ver um painel de detalhes com uma **Descrição**, como **remediar** e outras informações relacionadas, como **Impacto** ou **Benchmark**.

## <a name="view-vulnerabilities-in-graphical-interactive-reports"></a>Ver vulnerabilidades em relatórios gráficos e interativos

A galeria de livros de trabalho integrada do Centro de Segurança Azure Monitor inclui um relatório interativo de todas as descobertas dos scanners de vulnerabilidade para máquinas, contentores em registos de contentores e servidores SQL.

As conclusões de cada um destes scanners são comunicadas em recomendações separadas:

- As vulnerabilidades nas suas máquinas virtuais devem ser remediadas
- As vulnerabilidades nas imagens do Registo de Contentores de Azure devem ser remediadas (alimentadas por Qualys)
- Os resultados da avaliação da vulnerabilidade nas bases de dados do SQL devem ser remediados
- Os resultados da avaliação da vulnerabilidade nos seus servidores SQL em máquinas devem ser remediados

O relatório "Resultados da Avaliação da Vulnerabilidade" reúne todas estas conclusões e organiza-as por gravidade, tipo de recursos e categoria. Pode encontrar o relatório na galeria de livros disponíveis na barra lateral do Security Center.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/vulnerability-assessment-findings-report-sql.png" alt-text="Relatório de resultados da avaliação de vulnerabilidades do Centro de Segurança":::


## <a name="disable-specific-findings-preview"></a>Desativar as conclusões específicas (pré-visualização)

Se tiver uma necessidade organizacional de ignorar uma descoberta, em vez de remediar, pode desativá-la opcionalmente. As descobertas desativadas não afetam a sua pontuação segura ou geram ruídos indesejados.

Quando uma descoberta corresponde aos critérios que definiu nas suas regras de desativação, não constará na lista de resultados. Os cenários típicos incluem:

- Desativar as descobertas com severidade abaixo do meio
- Desativar as conclusões que não são remendáveis
- Desativar as conclusões de critérios de referência que não são de interesse para um âmbito definido

> [!IMPORTANT]
> Para desativar descobertas específicas, precisa de permissões para editar uma política na Política Azure. Saiba mais nas [permissões Azure RBAC na Azure Policy](../governance/policy/overview.md#azure-rbac-permissions-in-azure-policy).

Para criar uma regra:

1. A partir da página de detalhes das recomendações para **a avaliação da vulnerabilidade, os resultados dos seus servidores SQL em máquinas devem ser remediados,** selecione **Regra de Desativação**.

1. Selecione o âmbito relevante.

1. Defina os seus critérios. Pode utilizar qualquer um dos seguintes critérios: 
    - Encontrar ID 
    - Gravidade 
    - Testes de referências 

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/disable-rule-vulnerability-findings-sql.png" alt-text="Criar uma regra de desativação para as descobertas de VA em servidores SQL em máquinas":::

1. **Selecione Aplicar a regra**. As mudanças podem levar até 24 horas para fazer efeito.

1. Para ver, anular ou apagar uma regra: 

    1. **Selecione Regra de desativação**.

    1. Da lista de âmbito, as subscrições com regras ativas mostram **como regra aplicada**.

        :::image type="content" source="./media/remediate-vulnerability-findings-vm/modify-rule.png" alt-text="Modificar ou eliminar uma regra existente":::

    1. Para visualizar ou eliminar a regra, selecione o menu de elipses ("...").

## <a name="manage-vulnerability-assessments-programmatically"></a>Gerir avaliações de vulnerabilidade programáticamente

### <a name="using-azure-powershell"></a>Utilizar o Azure PowerShell

Pode utilizar cmdlets Azure PowerShell para gerir programaticamente as suas avaliações de vulnerabilidade. Os cmdlets suportados são:

| Nome cmdlet como ligação | Description |
| :-------------------- | :---------- |
| [Add-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/add-azsecuritysqlvulnerabilityassessmentbaseline) | Adicione a linha de base de avaliação de vulnerabilidades SQL. |
| [Get-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentbaseline) | Obtenha a linha de base de avaliação de vulnerabilidades SQL. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanResult](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanresult) | Obtém resultados de avaliação de vulnerabilidades SQL. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanRecord](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanrecord) | Obtém registos de avaliação de vulnerabilidades SQL. |
| [Remove-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/remove-azsecuritysqlvulnerabilityassessmentbaseline) | Remove a linha de base de asses de vulnerabilidade SQL. |
| [Set-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/set-azsecuritysqlvulnerabilityassessmentbaseline) | Define a nova linha de base de avaliação de vulnerabilidades SQL numa base de dados específica descarta a linha de base antiga, se existir alguma. |
| &nbsp; | &nbsp; |

## <a name="next-steps"></a>Passos seguintes

Saiba mais sobre as proteções do Security Center para os recursos SQL em [Introdução ao Azure Defender para SQL](defender-for-sql-introduction.md).
