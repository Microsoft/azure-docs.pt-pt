---
title: Notas de versão
description: Notas de versão do Azure SQL Data Warehouse.
services: sql-data-warehouse
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.subservice: ''
ms.date: 1/14/2020
author: anumjs
ms.author: anjangsh
ms.reviewer: jrasnick
manager: craigg
ms.custom: seo-lt-2019
ms.openlocfilehash: 3170ca428b0b06f3d76bfd6037f75f345a2a466a
ms.sourcegitcommit: 4f6a7a2572723b0405a21fea0894d34f9d5b8e12
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 02/04/2020
ms.locfileid: "76989676"
---
# <a name="azure-sql-data-warehouse-release-notes"></a>Notas de versão do Azure SQL Data Warehouse

Este artigo resume os novos recursos e melhorias nas versões recentes do [azure SQL data warehouse](sql-data-warehouse-overview-what-is.md) (Azure SQL DW). O artigo também lista as atualizações de conteúdo notáveis que não estão diretamente relacionadas à versão, mas publicadas no mesmo período de tempo. Para aprimoramentos em outros serviços do Azure, consulte [atualizações de serviço](https://azure.microsoft.com/updates).

## <a name="check-your-azure-sql-data-warehouse-version"></a>Verifique sua versão de SQL Data Warehouse do Azure

À medida que novos recursos são distribuídos para todas as regiões, verifique a versão implantada em sua instância e as notas de versão mais recentes do Azure SQL DW para disponibilidade de recursos. Para verificar sua versão do SQL DW do Azure, conecte-se ao seu data warehouse via SQL Server Management Studio (SSMS) e execute `SELECT @@VERSION;` para retornar a versão atual do SQL DW do Azure.

Resultado do exemplo:

![Versão do SQL Data Warehouse](./media/release-notes/t47-1-version.png)

Use a versão identificada para confirmar qual versão foi aplicada ao Azure SQL DW.

## <a name="january-2020"></a>Janeiro de 2020

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Métricas de Portal de Gerenciamento de carga de trabalho (versão prévia)**|Com o lançamento do [isolamento da carga de trabalho](/azure/sql-data-warehouse/sql-data-warehouse-workload-isolation) para visualização deste último outubro, os usuários podem criar seus próprios [grupos de cargas de trabalho](/sql/t-sql/statements/create-workload-group-transact-sql?view=azure-sqldw-latest) para gerenciar com eficiência os recursos do sistema e garantir que os SLAs comerciais sejam atendidos.  Como parte dos aprimoramentos gerais de [Gerenciamento de carga de trabalho](/azure/sql-data-warehouse/sql-data-warehouse-workload-management) do Azure Synapse Analytics, novas [métricas de monitoramento de gerenciamento de carga de trabalho](/azure/sql-data-warehouse/sql-data-warehouse-workload-management-portal-monitor) agora estão disponíveis.</br> </br> Monitorar sua carga de trabalho agora tem mais informações com as seguintes métricas: </br> Porcentagem de recursos de limite efetivo  </br> Percentual de recurso mín. mínimo efetivo </br> -Consultas ativas do grupo de cargas de trabalho </br> -Alocação do grupo de cargas de trabalho por porcentagem máxima de recursos </br> -Alocação do grupo de cargas de trabalho por porcentagem do sistema </br> -Tempos limite de consulta do grupo de cargas de trabalho </br> -Grupo de cargas de trabalho consultas em fila </br></br> Use essas métricas para identificar [afunilamentos de grupo de carga](/azure/sql-data-warehouse/sql-data-warehouse-workload-management-portal-monitor#workload-group-bottleneck) de trabalho ou grupos de carga de trabalho configurados com [isolamento de carga de trabalho subutilizado](/azure/sql-data-warehouse/sql-data-warehouse-workload-management-portal-monitor#underutilized-workload-isolation).  Essas métricas podem ser usadas no portal do Azure que permite a divisão por grupo de carga de trabalho.  Filtre e fixe seus grafos favoritos em um painel para obter acesso rápido às informações.|
|**Métricas de monitoramento do portal**| As seguintes métricas foram adicionadas ao portal para monitorar a atividade de consulta geral: </br> -Consultas ativas </br> -Consultas em fila </br> </br>Essas métricas são descritas junto com as métricas existentes na [documentação monitoramento de utilização de recursos e atividade de consulta](/azure/sql-data-warehouse/sql-data-warehouse-concept-resource-utilization-query-activity).|
|**Nome do produto**|Até junho de 2020, o nome do produto devolvido por SELECT @@VERSION mudará de Microsoft Azure SQL Data Warehouse para Azure Synapse Analytics. Publicaremos a programação nas nossas notas de lançamento. Esta alteração é relevante para os clientes que analisam o nome do produto a partir do resultado do SELECT @@VERSION no seu código de aplicação. Para evitar alterações no código de aplicação devido ao rebranding do produto, utilize estes comandos para consultar serverproperty para o nome e versão do produto da base de dados. </br> Para devolver o número XX da versão DW. X.XXXXX. X (sem nome do produto) utilize este comando: SELECT SERVERPROPERTY ('ProductVersion') </br> Para devolver a edição do motor, utilize este comando que devolve 6 para Azure Synapse Analytics (Antiga SQL Data Warehouse): SELECT SERVERPROPERTY ('EngineEdition')|

## <a name="october-2019"></a>Outubro de 2019

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Cópia (visualização)**|Estamos empolgados em anunciar a visualização pública de uma simples e flexível instrução de cópia para ingestão de dados. Com apenas uma instrução, agora você pode ingerir diretamente os dados com flexibilidade adicional e sem a necessidade de usuários com alto privilégio. Para obter mais informações, consulte [copiar documentação do comando](/sql/t-sql/statements/copy-into-transact-sql?view=azure-sqldw-latest).|
|**Isolamento de carga de trabalho (versão prévia)**|Para dar suporte aos clientes à medida que eles democratizem seus data warehouses, estamos anunciando novos recursos para gerenciamento de carga de trabalho inteligente. A nova funcionalidade de [isolamento de carga de trabalho](/azure/sql-data-warehouse/sql-data-warehouse-workload-isolation) permite que você gerencie a execução de cargas de trabalho heterogêneas e forneça flexibilidade e controle sobre data warehouse recursos. Isso leva a uma previsibilidade de execução aprimorada e aprimora a capacidade de satisfazer os SLAs predefinidos. </br>Além do isolamento da carga de trabalho, opções adicionais agora estão disponíveis para [classificação de carga de trabalho](/azure/sql-data-warehouse/sql-data-warehouse-workload-classification).  Além da classificação de logon, a sintaxe [criar classificador de carga de trabalho](/sql/t-sql/statements/create-workload-classifier-transact-sql?view=azure-sqldw-latest) fornece a capacidade de classificar solicitações com base no rótulo da consulta, no contexto da sessão e na hora do dia.|
|**PREVER (visualização)**|Agora você pode pontuar modelos de aprendizado de máquina dentro de seu data warehouse, evitando a necessidade de movimentação de dados grande e complexa. A função de previsão do T-SQL depende da estrutura do modelo aberto e usa o modelo de dados e de aprendizado de máquina como entrada para gerar previsões.
|**CI/CD (GA) SSDT**|Hoje, estamos empolgados em anunciar a disponibilidade geral do [recurso mais alto solicitado](https://feedback.azure.com/forums/307516-sql-data-warehouse/suggestions/13313247--in-preview-database-project-from-visual-studio-t) para projetos de banco de dados SQL Data Warehouse – SQL Server Data Tools (SSDT). Esta versão inclui suporte para SSDT com o Visual Studio 2019, juntamente com a integração da plataforma nativa com o Azure DevOps fornecendo recursos internos de CI/CD (integração contínua e implantação) para implantações de nível empresarial. |
|**Exibição materializada (GA)**|Uma exibição materializada persiste os dados retornados da consulta de definição de exibição e são atualizados automaticamente como alterações de dados nas tabelas subjacentes. Ele melhora o desempenho de consultas complexas (normalmente consultas com junções e agregações) ao mesmo tempo que oferece operações de manutenção simples. Para obter mais informações, consulte [ajuste de desempenho com exibições materializadas](/azure/sql-data-warehouse/performance-tuning-materialized-views).  Instale o [SQL Server Management Studio 18,4 ou posterior](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15) para gerar script de exibições materializadas.|
|**Máscara de Dados Dinâmicos (GA)**|A Máscara de Dados Dinâmica (DDM) previne acessos não autorizados aos seus dados confidenciais no seu armazém de dados ao ofuscá-lo imediatamente nos resultados das consultas com base nas regras de máscara que definir. Para saber mais, confira [mascaramento de dados dinâmicos do SQL Database](/azure/sql-database/sql-database-dynamic-data-masking-get-started).|
|**Leitura de isolamento de instantâneo confirmado (GA)**|Você pode usar ALTER bancos para habilitar ou desabilitar o isolamento de instantâneo para um banco de dados de usuário. Para evitar o impacto em sua carga de trabalho atual, convém definir essa opção durante a janela de manutenção do banco de dados ou aguardar até que não haja nenhuma outra conexão ativa com o banco de dados. Para obter mais informações, consulte [Opções ALTER DATABASE SET](/sql/t-sql/statements/alter-database-transact-sql-set-options?view=azure-sqldw-latest).|
|**Índice Columnstore clusterizado ordenado (GA)**|O Columnstore é um ativador de chaves para armazenar e consultar eficientemente grandes quantidades de dados. Os índices columnstore em cluster ordenados otimizam ainda mais a execução de consultas ao permitir a eliminação eficiente de segmentos.   Para obter mais informações, consulte [ajuste de desempenho com o índice columnstore clusterizado ordenado](/azure/sql-data-warehouse/performance-tuning-ordered-cci).|
|**Cache do conjunto de resultados (GA)**|Quando o cache do conjunto de resultados estiver habilitado, o Azure SQL Data Warehouse armazenará em cache automaticamente os resultados da consulta no banco de dados do usuário para uso repetitivo. Isso permite que as execuções de consulta subsequentes obtenham resultados diretamente do cache persistente, de modo que a recomputação não seja necessária. O cache do conjunto de resultados melhora o desempenho da consulta e reduz o uso de recursos de computação. Além disso, as consultas que usam resultados em cache definidos não usam nenhum slot de simultaneidade e, portanto, não contam com os limites de simultaneidade existentes. Por segurança, os usuários só poderão acessar os resultados armazenados em cache se tiverem as mesmas permissões de acesso a dados que os usuários que criam os resultados armazenados em cache. Para obter mais informações, consulte [ajuste de desempenho com cache de conjunto de resultados](/azure/sql-data-warehouse/performance-tuning-result-set-caching). Aplica-se à versão 10.0.10783.0 ou superior.|

## <a name="september-2019"></a>Setembro de 2019

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Link privado do Azure (visualização)**|Com o [link privado do Azure](https://azure.microsoft.com/blog/announcing-azure-private-link/), você pode criar um ponto de extremidade privado em sua rede virtual (VNet) e mapeá-lo para o SQL DW do Azure. Esses recursos são então acessíveis por meio de um endereço IP privado em sua VNet, permitindo a conectividade local por meio de emparelhamento privado e/ou gateway de VPN do Azure ExpressRoute. De modo geral, isso simplifica a configuração de rede, não exigindo que você a Abra em endereços IP públicos. Isso também permite a proteção contra riscos de vazamento de dados. Para obter mais detalhes, consulte [visão geral](/azure/private-link/private-link-overview) e [documentação do SQL DW](/azure/sql-database/sql-database-private-endpoint-overview).|
|**Classificação de & de descoberta de dados (GA)**|O recurso [de classificação e descoberta de dados](/azure/sql-database/sql-database-data-discovery-and-classification?toc=/azure/sql-data-warehouse/toc.json) já está disponível para o público geral. Esse recurso fornece recursos avançados para **descobrir, classificar, rotular & proteger** dados confidenciais em seus bancos de dado.|
|**Integração de um clique do Azure Advisor**|O SQL Data Warehouse agora se integra diretamente com as recomendações do assistente do Azure na folha visão geral, juntamente com a oferta de uma experiência com um único clique. Agora você pode descobrir recomendações na folha de visão geral em vez de navegar até a folha do supervisor do Azure. Saiba mais sobre as recomendações [aqui](sql-data-warehouse-concept-recommendations.md).|
|**Ler isolamento de instantâneo confirmado (visualização)**|Você pode usar ALTER bancos para habilitar ou desabilitar o isolamento de instantâneo para um banco de dados de usuário.  Para evitar o impacto em sua carga de trabalho atual, convém definir essa opção durante a janela de manutenção do banco de dados ou aguardar até que não haja nenhuma outra conexão ativa com o banco de dados. Para obter mais informações, consulte [Opções ALTER DATABASE SET](/sql/t-sql/statements/alter-database-transact-sql-set-options?view=azure-sqldw-latest).|
|**EXECUTAR como (Transact-SQL)**| [Executar como](/sql/t-sql/statements/execute-as-transact-sql?view=azure-sqldw-latest) O suporte a T-SQL agora está disponível em SQL Data Warehouse permitindo que os clientes definam o contexto de execução de uma sessão para o usuário especificado.|
|**Suporte a T-SQL adicional**|A área de superfície da linguagem T-SQL para SQL Data Warehouse foi estendida para incluir suporte para: </br> [formato de - (Transact-SQL)](/sql/t-sql/functions/format-transact-sql?view=azure-sqldw-latest)</br> - [TRY_PARSE (Transact-SQL)](/sql/t-sql/functions/try-parse-transact-sql?view=azure-sqldw-latest)</br> TRY_CAST - [(Transact-SQL)](/sql/t-sql/functions/try-cast-transact-sql?view=azure-sqldw-latest)</br> [- TRY_CONVERT (Transact-SQL)](/sql/t-sql/functions/try-convert-transact-sql?view=azure-sqldw-latest)</br> - [sys.user_token (Transact-SQL)](/sql//relational-databases/system-catalog-views/sys-user-token-transact-sql?view=azure-sqldw-latest)|

## <a name="july-2019"></a>Julho de 2019

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Exibição materializada (visualização)**|Uma exibição materializada persiste os dados retornados da consulta de definição de exibição e são atualizados automaticamente como alterações de dados nas tabelas subjacentes. Ele melhora o desempenho de consultas complexas (normalmente consultas com junções e agregações) ao mesmo tempo que oferece operações de manutenção simples. Para obter mais informações, veja: </br> - [CREATE MATERIALIZED VIEW AS SELECT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-materialized-view-as-select-transact-sql?view=azure-sqldw-latest)</br> - [ALTER materializated View &#40;Transact-SQL&#41; ](/sql/t-sql/statements/alter-materialized-view-transact-sql?view=azure-sqldw-latest) </br> - [instruções t-SQL com suporte no Azure SQL data warehouse](/azure/sql-data-warehouse/sql-data-warehouse-reference-tsql-statements)|
|**Suporte a T-SQL adicional**|A área de superfície da linguagem T-SQL para SQL Data Warehouse foi estendida para incluir suporte para: </br> - [no fuso horário (Transact-SQL)](/sql/t-sql/queries/at-time-zone-transact-sql?view=azure-sqldw-latest)</br> - [STRING_AGG (Transact-SQL)](/sql/t-sql/functions/string-agg-transact-sql?view=azure-sqldw-latest)|
|**Cache do conjunto de resultados (visualização)**|Comandos DBCC adicionados para gerenciar o cache do conjunto de resultados anunciado anteriormente. Para obter mais informações, veja: </br> - [DBCC DROPRESULTSETCACHE &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-dropresultsetcache-transact-sql?view=azure-sqldw-latest)  </br> - [DBCC SHOWRESULTCACHESPACEUSED &#40;Transact-SQL&#41;](/sql/t-sql/database-console-commands/dbcc-showresultcachespaceused-transact-sql?view=azure-sqldw-latest) </br></br> Consulte também a nova coluna result_set_cache em [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql?view=azure-sqldw-latest) que mostra quando uma consulta executada usou a cache do conjunto de resultados.|
|**Índice columnstore clusterizado ordenado (versão prévia)**|Nova coluna, column_store_order_ordinal, adicionada ao [sys.index_columns](/sql/relational-databases/system-catalog-views/sys-index-columns-transact-sql?view=azure-sqldw-latest) identificar a ordem das colunas num índice de lojas de colunas ordenada.|

## <a name="may-2019"></a>Maio de 2019

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Mascaramento de dados dinâmicos (visualização)**|A Máscara de Dados Dinâmica (DDM) previne acessos não autorizados aos seus dados confidenciais no seu armazém de dados ao ofuscá-lo imediatamente nos resultados das consultas com base nas regras de máscara que definir. Para saber mais, confira [mascaramento de dados dinâmicos do SQL Database](/azure/sql-database/sql-database-dynamic-data-masking-get-started).|
|**Importância da carga de trabalho agora disponível para o público geral**|A Classificação de Gestão e a Importância das Cargas de Trabalho oferecem a possiblidade de influenciar a ordem de execução das consultas. Para obter mais informações sobre a importância da carga de trabalho, consulte os artigos visão geral da [classificação](sql-data-warehouse-workload-classification.md) e [importância](sql-data-warehouse-workload-importance.md) na documentação do. Confira também o documento [criar classificador de carga de trabalho](/sql/t-sql/statements/create-workload-classifier-transact-sql?view=azure-sqldw-latest) .<br/><br/>Veja a importância da carga de trabalho em ação nos vídeos abaixo:<br/> [conceitos de gerenciamento de carga de trabalho](https://www.youtube.com/embed/QcCRBAhoXpM) -<br/> [cenários de gerenciamento de carga de trabalho](https://www.youtube.com/embed/_2rLMljOjw8) -|
|**Suporte a T-SQL adicional**|A área de superfície da linguagem T-SQL para SQL Data Warehouse foi estendida para incluir suporte para: </br> - [aparar](/sql/t-sql/functions/trim-transact-sql?view=azure-sqldw-latest)|
|**Funções JSON**|Os analistas de negócios agora podem usar uma linguagem T-SQL familiar para consultar e manipular documentos formatados como dados JSON usando as novas funções JSON a seguir no Azure data warehouse:</br> - [ISJSON](/sql/t-sql/functions/isjson-transact-sql?view=azure-sqldw-latest)</br> - [JSON_VALUE](/sql/t-sql/functions/json-value-transact-sql?view=azure-sqldw-latest)</br> -  [JSON_QUERY](/sql/t-sql/functions/json-query-transact-sql?view=azure-sqldw-latest)</br> -  [JSON_MODIFY](/sql/t-sql/functions/json-modify-transact-sql?view=azure-sqldw-latest)</br> - [OPENJSON](/sql/t-sql/functions/openjson-transact-sql?view=azure-sqldw-latest)|
|**Cache do conjunto de resultados (visualização)**|O cache de conjunto de resultados permite tempos de resposta de consulta instantânea e reduz o tempo de insight para analistas de negócios e usuários de relatórios. Para obter mais informações, veja:</br> - [ALTER DATABASE (Transact-SQL)](/sql/t-sql/statements/alter-database-transact-sql?view=azure-sqldw-latest)</br> [opções - ALTER DATABASE SET (TRANSACT SQL)](/sql/t-sql/statements/alter-database-transact-sql-set-options?view=azure-sqldw-latest)</br> - [definir cache de conjunto de resultados (Transact-SQL)](/sql/t-sql/statements/set-result-set-caching-transact-sql?view=azure-sqldw-latest)</br> [instrução - Set (Transact-SQL)](/sql/t-sql/statements/set-statements-transact-sql)</br> - [sys.databases (Transact-SQL)](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql?view=azure-sqldw-latest)|
|**Índice columnstore clusterizado ordenado (versão prévia)**|O Columnstore é um ativador de chaves para armazenar e consultar eficientemente grandes quantidades de dados. Em cada tabela, divide os dados recebidos em Grupos de Linhas e cada coluna de um Grupo de Linhas forma um Segmento num disco.  Os índices columnstore em cluster ordenados otimizam ainda mais a execução de consultas ao permitir a eliminação eficiente de segmentos.   Para obter mais informações, consulte:</br> [CREATE TABLE de -  (SQL data warehouse do Azure)](/sql/t-sql/statements/create-table-azure-sql-data-warehouse?view=azure-sqldw-latest)</br> -  [CREATE COLUMNSTORE INDEX (Transact-SQL)](/sql/t-sql/statements/create-columnstore-index-transact-sql?view=azure-sqldw-latest).|

## <a name="march-2019"></a>Março de 2019

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Classificação de & de descoberta de dados**|A Deteção e Classificação de Dados já está disponível em pré-visualização no Azure SQL Data Warehouse. É essencial proteger dados confidenciais e a privacidade de seus clientes. À medida que seus ativos de dados de negócios e clientes crescem, eles se tornam não gerenciáveis para descobrir, classificar e proteger seus dados. O recurso de descoberta e classificação de dados que estamos introduzindo nativamente com o Azure SQL Data Warehouse ajuda a tornar a proteção de seus dados mais gerenciável. No geral, esta capacidade permite:<br/>&bull; &nbsp; atender aos padrões de privacidade de dados e aos requisitos de conformidade regulatória.<br/>&bull; &nbsp; restringir o acesso e a proteção da segurança de data warehouses que contêm dados altamente confidenciais.<br/>&bull; &nbsp; monitoramento e alertas sobre o acesso anormal aos dados confidenciais.<br/>&bull; &nbsp; visualização de dados confidenciais em um painel central no portal do Azure. </br></br>A classificação de & de descoberta de dados está disponível para o Azure SQL Data Warehouse em todas as regiões do Azure, faz parte da segurança de dados avançada, incluindo avaliação de vulnerabilidade e detecção de ameaças. Para obter mais informações sobre a classificação de & de dados de descoberta, consulte a [postagem de blog](https://azure.microsoft.com/blog/announcing-public-preview-of-data-discovery-classification-for-microsoft-azure-sql-data-warehouse/) e nossa [documentação](/azure/sql-database/sql-database-data-discovery-and-classification)online.|
|**AGRUPAR POR ROLLUP**|O ROLLUP agora é uma opção GROUP BY com suporte no Azure data warehouse.   GROUP BY ROLLUP cria um grupo para cada combinação de expressões de coluna. Agrupar por também "acumula" os resultados em subtotais e totais gerais. A função GROUP BY processa da direita para a esquerda, diminuindo o número de expressões de coluna sobre as quais ele cria grupos e agregações.  A ordem das colunas afeta a saída de ROLLUP e pode afetar o número de linhas no conjunto de resultados.<br/><br/>Para obter mais informações sobre o ROLLUP GROUP BY, consulte [Group by (Transact-SQL)](/sql/t-sql/queries/select-group-by-transact-sql?view=azure-sqldw-latest)
|**Precisão aprimorada para DWU usadas e métricas do portal da CPU**|SQL Data Warehouse aprimora significativamente a precisão da métrica no portal do Azure.  Esta versão inclui uma correção para a definição de métrica usada pela CPU e pelo DWU para refletir corretamente sua carga de trabalho em todos os nós de computação. Antes dessa correção, os valores de métrica estavam sendo subportados. Espere ver um aumento nas métricas de CPU e DWU usadas no portal do Azure. |
|**Segurança em Nível de Linha**|Introduzimos o recurso de segurança em nível de linha novamente em novembro de 2017. Agora, estendemos esse suporte para tabelas externas também. Além disso, adicionamos suporte para chamar funções não determinísticas nas funções com valor de tabela embutida (TVFs embutido) necessárias para definir um predicado de filtro de segurança. Esta adição permite-lhe especificar IS_ROLEMEMBER(), USER_NAME() etc. no predicado do filtro de segurança. Para obter mais informações, consulte os exemplos na [documentação de segurança em nível de linha](/sql/relational-databases/security/row-level-security).|
|**Suporte a T-SQL adicional**|A área de superfície da linguagem T-SQL para o Armazém de Dados SQL foi alargada para incluir suporte para [STRING_SPLIT (Transact-SQL)](/sql/t-sql/functions/string-split-transact-sql).
|**Aprimoramentos do otimizador de consulta** |A otimização de consulta é um componente crítico de qualquer banco de dados. Fazer escolhas ideais para a melhor execução de uma consulta pode gerar melhorias significativas.  Ao executar consultas analíticas complexas em um ambiente distribuído, o número de operações executadas é importante. O desempenho da consulta foi aprimorado, produzindo melhores planos de qualidade. Esses planos minimizam operações caras de transferência de dados e computações redundantes, como subconsultas repetidas. Para obter mais informações, consulte esta [postagem no blog](https://azure.microsoft.com/blog/smarter-faster-safer-azure-sql-data-warehouse-is-simply-unmatched/)do Azure SQL data warehouse.|
| | |

### <a name="documentation-improvements"></a>Aprimoramentos na documentação

| Aprimoramentos na documentação | Detalhes |
| --- | --- |
| | |

## <a name="january-2019"></a>Janeiro de 2019

### <a name="service-improvements"></a>Melhorias de serviço

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Ordem de retorno por otimização**|SELECIONAR... As consultas ORDENAr por obtêm um aumento de desempenho nesta versão.   Agora, todos os nós de computação enviam seus resultados para um único nó de computação. Esse nó mescla e classifica os resultados e os retorna para o usuário.  A mesclagem por meio de um único nó de computação resulta em um lucro significativo no desempenho quando o conjunto de resultados da consulta contém um grande número de linhas. Anteriormente, o mecanismo de execução de consulta ordenaria os resultados em cada nó de computação. Os resultados seriam transmitidos para o nó de controle. Em seguida, o nó de controle mesclaria os resultados.|
|**Aprimoramentos de movimentação de dados para PartitionMove e BroadcastMove**|No Azure SQL Data Warehouse Gen2, as etapas de movimentação de dados do tipo ShuffleMove, usam técnicas de movimentação de dados instantâneos.  Para obter mais informações, consulte [blog sobre aprimoramentos de desempenho](https://azure.microsoft.com/blog/lightning-fast-query-performance-with-azure-sql-data-warehouse/). Com esta versão, PartitionMove e BroadcastMove agora são compatíveis com as mesmas técnicas de movimentação de dados instantâneas. As consultas de usuário que usam esses tipos de etapas de movimentação de dados serão executadas com um desempenho aprimorado. Nenhuma alteração de código é necessária para aproveitar essas melhorias de desempenho.|
|**Bugs notáveis**|Versão incorreta do SQL Data Warehouse do Azure-`SELECT @@VERSION` pode retornar a versão incorreta, 10.0.9999.0. A versão correta para a versão atual é 10.0.10106.0. Esse bug foi relatado e está sob revisão.
| | |

### <a name="documentation-improvements"></a>Aprimoramentos na documentação

| Aprimoramentos na documentação | Detalhes |
| --- | --- |
|nenhuma | |
| | |

## <a name="december-2018"></a>Dezembro de 2018

### <a name="service-improvements"></a>Melhorias de serviço

| Melhorias de serviço | Detalhes |
| --- | --- |
|**Pontos de extremidade de serviço de rede virtual geralmente disponíveis**|Esta versão inclui a disponibilidade geral de pontos de extremidade de serviço de rede virtual (VNet) para o Azure SQL Data Warehouse em todas as regiões do Azure. Os pontos de extremidade do serviço de VNet permitem que você Isole a conectividade com o servidor lógico de uma determinada sub-rede ou conjunto de sub-redes em sua rede virtual. O tráfego para o Azure SQL Data Warehouse de sua VNet sempre permanecerá na rede de backbone do Azure. Essa rota direta será preferida em todas as rotas específicas que tomam tráfego de Internet por meio de dispositivos virtuais ou locais. Nenhuma cobrança adicional é cobrada pelo acesso à rede virtual por meio de pontos de extremidade de serviço. O modelo de preço atual para o [Azure SQL data warehouse](https://azure.microsoft.com/pricing/details/sql-data-warehouse/gen2/) se aplica como está.<br/><br/>Com esta versão, habilitamos também a conectividade do polybase com a [Azure data Lake Storage Gen2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) (ADLS) por meio [do driver do sistema de arquivos de blob do Azure](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-abfs-driver) (ABFS). Azure Data Lake Storage Gen2 traz todas as qualidades necessárias para o ciclo de vida completo dos dados de análise para o armazenamento do Azure. Os recursos dos dois serviços de armazenamento do Azure existentes, o armazenamento de BLOBs do Azure e os Azure Data Lake Storage Gen1 são convergidos. Os recursos do [Azure data Lake Storage Gen1](https://docs.microsoft.com/azure/data-lake-store/index), como a semântica do sistema de arquivos, a segurança em nível de arquivo e a escala, são combinados com baixo custo, armazenamento em camadas e recursos de alta disponibilidade/recuperação de desastre do [armazenamento de BLOBs do Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction).<br/><br/>Usando o polybase, você também pode importar dados para o Azure SQL Data Warehouse do armazenamento do Azure protegido para VNet. Da mesma forma, a exportação de dados do Azure SQL Data Warehouse para o armazenamento do Azure protegido para VNet também tem suporte por meio do polybase.<br/><br/>Para obter mais informações sobre pontos de extremidade de serviço de VNet no Azure SQL Data Warehouse, consulte a [postagem de blog](https://azure.microsoft.com/blog/general-availability-of-vnet-service-endpoints-for-azure-sql-data-warehouse/) ou a [documentação](https://docs.microsoft.com/azure/sql-database/sql-database-vnet-service-endpoint-rule-overview?toc=/azure/sql-data-warehouse/toc.json).|
|**Monitoramento de desempenho automático (visualização)**|[Repositório de consultas](https://docs.microsoft.com/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store?view=sql-server-2017) agora está disponível em versão prévia para o SQL data warehouse do Azure. O Repositório de Consultas foi projetado para ajudá-lo a solucionar problemas de desempenho de consulta rastreando consultas, planos de consulta, estatísticas de tempo de execução e histórico de consulta para ajudá-lo a monitorar a atividade e o desempenho do seu data warehouse. Repositório de Consultas é um conjunto de repositórios internos e DMVs (exibições de gerenciamento dinâmico) que permitem que você:<br/><br/>&bull; &nbsp; identificar e ajustar as principais consultas de consumo de recursos<br/>&bull; &nbsp; identificar e melhorar as cargas de trabalho não planejadas<br/>&bull; &nbsp; avaliar o desempenho e o impacto da consulta no plano por alterações nas estatísticas, nos índices ou no tamanho do sistema (configuração DWU)<br/>&bull; &nbsp; ver o texto completo da consulta para todas as consultas executadas<br/><br/>O Repositório de Consultas contém três armazenamentos reais:<br/>&bull; &nbsp; um repositório de planos para persistir as informações do plano de execução<br/>&bull; &nbsp; um repositório de estatísticas de tempo de execução para persistir as informações de estatísticas de execução<br/>&bull; &nbsp; um repositório de estatísticas de espera para manter informações de estatísticas de espera.<br/><br/>O SQL Data Warehouse gerencia esses armazenamentos automaticamente e fornece um número ilimitado de consultas storied nos últimos sete dias sem custo adicional. Habilitar Repositório de Consultas é tão simples quanto executar uma instrução T-SQL ALTER DATABASE: <br/>sql ----ALTER DATABASE [DatabaseName] SET QUERY_STORE = ON;-------Para mais informações sobre a Loja de Consultas no Armazém de Dados Azure SQL, consulte o artigo, [monitorizando](/sql/relational-databases/performance/monitoring-performance-by-using-the-query-store)o desempenho utilizando a Loja de Consultas e os DMVs da Loja de Consulta, tais como [sys.query_store_query](/sql/relational-databases/system-catalog-views/sys-query-store-query-transact-sql). Aqui está a [postagem no blog](https://azure.microsoft.com/blog/automatic-performance-monitoring-in-azure-sql-data-warehouse-with-query-store/) anunciando a versão.|
|**Reduzir as camadas de computação para o Azure SQL Data Warehouse Gen2**|O Azure SQL Data Warehouse Gen2 agora dá suporte a camadas de computação inferiores. Os clientes podem experimentar os principais recursos de desempenho, flexibilidade e segurança do Azure SQL Data Warehouse a partir de 100 cDWU ([unidades de data warehouse](what-is-a-data-warehouse-unit-dwu-cdwu.md)) e dimensionar para 30.000 cDWU em minutos. A partir de meados de dezembro de 2018, os clientes podem se beneficiar do desempenho e da flexibilidade do Gen2 com camadas de computação inferiores em [regiões](gen2-migration-schedule.md#automated-schedule-and-region-availability-table), com o restante das regiões disponíveis durante a 2019.<br/><br/>Ao descartar o ponto de entrada para data warehousing de última geração, a Microsoft abre as portas para clientes orientados a valor que desejam avaliar todos os benefícios de um data warehouse seguro e de alto desempenho sem adivinhar qual ambiente de avaliação é melhor para eles. Os clientes podem começar com menos de 100 cDWU, abaixo do ponto de entrada atual de 500 cDWU. SQL Data Warehouse Gen2 continua oferecendo suporte a operações de pausa e retomada e vai além da flexibilidade em computação. O Gen2 também dá suporte à capacidade ilimitada de armazenamento de coluna-repositório, juntamente com 2,5 vezes mais memória por consulta, até 128 consultas simultâneas e recursos de [cache adaptável](https://azure.microsoft.com/blog/adaptive-caching-powers-azure-sql-data-warehouse-performance-gains/) . Esses recursos em média levam cinco vezes mais desempenho em comparação com a mesma unidade de data warehouse em Gen1 pelo mesmo preço. Os backups com redundância geográfica são padrão para Gen2 com proteção de dados interna garantida. O Azure SQL Data Warehouse Gen2 está pronto para ser dimensionado quando você estiver.|
|**Mesclagem em segundo plano Columnstore**|Por padrão, o Azure SQL Data Warehouse (Azure SQL DW) armazena dados em formato de coluna, com micro partições chamadas de [RowGroups](sql-data-warehouse-memory-optimizations-for-columnstore-compression.md). Às vezes, devido a restrições de memória na compilação do índice ou ao tempo de carregamento de dados, os RowGroups podem ser compactados com menos do que o tamanho ideal de 1 milhão linhas. Os RowGroups também podem ser fragmentados devido a exclusões. Os RowGroups pequenos ou fragmentados resultam em maior consumo de memória, bem como em uma execução de consulta ineficiente. Com esta versão do SQL DW do Azure, a tarefa de manutenção em segundo plano do columnstore mescla pequenos grupos de colunas compactados para criar grupos de rowgroup maiores para utilizar melhor a memória e acelerar a execução da consulta.
| | |

## <a name="october-2018"></a>Outubro de 2018

### <a name="service-improvements"></a>Melhorias de serviço

| Melhorias de serviço | Detalhes |
| --- | --- |
|**DevOps para data warehousing**|O recurso altamente solicitado para SQL Data Warehouse (SQL DW) agora está em visualização com o suporte para SQL Server Data Tool (SSDT) no Visual Studio! As equipes de desenvolvedores agora podem colaborar por meio de uma única base de código controlada por versão e implantar rapidamente alterações em qualquer instância do mundo. Interessado em ingressar? Este recurso está disponível para visualização hoje! Você pode registrar-se visitando o [formulário de registro SQL data warehouse Visual Studio SQL Server Data Tools (SSDT)-Preview](https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR4-brmKy3TZOjoktwuHd7S1UODkwQ1lVMEw1NDBGRjNLRDNWOFlQRUpIRi4u). Devido à alta demanda, estamos Gerenciando a aceitação na versão prévia para garantir a melhor experiência para nossos clientes. Depois de se inscrever, nosso objetivo é confirmar seu status dentro de sete dias úteis.|
|**Segurança em Nível de Linha disponível para o público geral**|O Azure SQL Data Warehouse (SQL DW) agora dá suporte à RLS (segurança em nível de linha), adicionando um recurso poderoso para proteger seus dados confidenciais. Com a introdução da RLS, você pode implementar políticas de segurança para controlar o acesso a linhas em suas tabelas, como em quem pode acessar quais linhas. A RLS permite esse controle de acesso refinado sem a necessidade de reprojetar sua data warehouse. A RLS simplifica o modelo de segurança geral, já que a lógica de restrição de acesso está localizada na própria camada de banco de dados, e não em relação a os mesmos em outro aplicativo. A RLS também elimina a necessidade de introduzir exibições para filtrar linhas para o gerenciamento de controle de acesso. Não há nenhum custo adicional para esse recurso de segurança de nível empresarial para todos os nossos clientes.|
|**Consultores avançados**|O ajuste avançado para o Azure SQL Data Warehouse (SQL DW) ficou mais simples com recomendações e métricas de data warehouse adicionais. Há recomendações adicionais de desempenho avançado por meio do Azure Advisor à sua disposição, incluindo:<br/><br/>1. cache adaptável – seja avisado quando dimensionar para otimizar a utilização do cache.<br/>2. distribuição de tabela – determine quando replicar tabelas para reduzir a movimentação de dados e aumentar o desempenho da carga de trabalho.<br/>3. tempdb – entenda quando dimensionar e configurar classes de recursos para reduzir a contenção de tempdb.<br/><br/>Há uma integração mais profunda das métricas de data warehouse com [Azure monitor](https://azure.microsoft.com/blog/enhanced-capabilities-to-monitor-manage-and-integrate-sql-data-warehouse-in-the-azure-portal/) incluindo um gráfico de monitoramento personalizável aprimorado para métricas quase em tempo real na folha de visão geral. Já não precisa de deixar que o painel de descrição geral do armazém de dados aceda às métricas do Azure Monitor quando monitorizar a utilização ou validar e aplicar as recomendações do armazém de dados. Além disso, há novas métricas disponíveis, como tempdb e utilização de cache adaptável para complementar suas recomendações de desempenho.|
|**Ajuste avançado com consultores integrados**|O ajuste avançado para o Azure SQL Data Warehouse (SQL DW) ficou mais simples com recomendações e métricas de data warehouse adicionais e uma reformulação da folha visão geral do portal que fornece uma experiência integrada com o Azure Advisor e o Azure Monitor.|
|**ADR (recuperação de banco de dados acelerada)**|A ADR (recuperação de banco de dados acelerada) SQL Data Warehouse do Azure está agora em visualização pública. ADR é um novo mecanismo de SQL Server que melhora muito a disponibilidade do banco de dados, especialmente na presença de transações de longa execução, remodelando completamente o processo de recuperação atual do zero. Os principais benefícios de ADR são recuperação rápida e consistente de banco de dados e reversão de transação instantânea.|
|**Azure Monitor logs de diagnóstico**|O SQL Data Warehouse (SQL DW) agora permite informações aprimoradas sobre cargas de trabalho analíticas integrando-se diretamente com Azure Monitor logs de diagnóstico. Essa nova funcionalidade permite aos desenvolvedores analisar o comportamento da carga de trabalho por um período de tempo estendido e tomar decisões informadas sobre a otimização da consulta ou o gerenciamento de capacidade. Agora introduzimos um processo de log externo por meio de [Azure monitor logs de diagnóstico](https://docs.microsoft.com/azure/monitoring/monitoring-data-collection?toc=/azure/azure-monitor/toc.json#logs) que fornecem informações adicionais sobre sua carga de trabalho de data warehouse. Com um único clique de um botão, agora você pode configurar logs de diagnóstico para recursos de solução de problemas de desempenho de consulta histórica usando [log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-queries). Azure Monitor logs de diagnóstico dão suporte a períodos de retenção personalizáveis salvando os logs em uma conta de armazenamento para fins de auditoria, a capacidade de transmitir logs para os hubs de eventos quase em tempo real insights de telemetria e a capacidade de analisar logs usando Log Analytics com consultas de log. Os registos de diagnósticos consistem em visualizações de telemetria do seu armazém de dados equivalentes às DMVs de resolução de problemas de desempenho utilizadas com mais frequência para o SQL Data Warehouse. Para esta versão inicial, habilitamos exibições para as seguintes exibições de gerenciamento dinâmico do sistema:<br/><br/>&bull; &nbsp; [sys.dm_pdw_exec_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-exec-requests-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_request_steps](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-request-steps-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_dms_workers](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-dms-workers-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_waits](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-waits-transact-sql)<br/>&bull; &nbsp; [sys.dm_pdw_sql_requests](/sql/relational-databases/system-dynamic-management-views/sys-dm-pdw-sql-requests-transact-sql)|
|**Gerenciamento de memória Columnstore**|À medida que aumenta o número de grupos de linhas de repositório de coluna compactados, a memória necessária para gerenciar os metadados de segmento de coluna internos para esses RowGroups aumenta.  Como resultado, o desempenho da consulta e as consultas executadas em algumas das DMVs (exibições de gerenciamento dinâmico) do Columnstore podem ser prejudicadas.  Foram feitas melhorias nesta versão para otimizar o tamanho dos metadados internos para esses casos, levando à experiência e ao desempenho aprimorados para essas consultas.|
|**Integração de Azure Data Lake Storage Gen2 (GA**|O Azure SQL Data Warehouse (SQL DW) agora tem integração nativa com o Azure Data Lake Storage Gen2. Agora, os clientes podem carregar dados usando tabelas externas do ABFS para o SQL DW. Essa funcionalidade permite que os clientes se integrem aos seus data lagos em Data Lake Storage Gen2.|
|**Bugs notáveis**|CETAS a falhas de parquet em pequenas classes de recursos em data warehouses de DW2000 e mais-essa correção identifica corretamente uma referência nula no caminho de código de criação de tabela externa como para parquet.<br/><br/>O valor da coluna de identidade pode ser perdido em algumas operações CTAS-o valor de uma coluna de identificação não pode ser preservado quando CTASed para outra tabela. Relatado em um [blog](https://blog.westmonroepartners.com/azure-sql-dw-identity-column-bugs/).<br/><br/>Falha interna em alguns casos em que uma sessão é encerrada enquanto uma consulta ainda está em execução – essa correção dispara uma InvalidOperationException se uma sessão for encerrada quando a consulta ainda estiver em execução.<br/><br/>(Implantado em novembro de 2018) Os clientes estavam enfrentando um desempenho inferior ao tentar carregar vários arquivos pequenos do ADLS (GEN1) usando o polybase. -O desempenho do sistema foi afunilado durante a validação do token de segurança do AAD. Os problemas de desempenho foram mitigados por meio da habilitação do cache de tokens de segurança. |
| | |

## <a name="next-steps"></a>Passos seguintes

- [criar um SQL Data Warehouse](./create-data-warehouse-portal.md)

## <a name="more-information"></a>Mais informações

- [Blog-SQL Data Warehouse do Azure](https://azure.microsoft.com/blog/tag/azure-sql-data-warehouse/)
- [Blogues da Equipa Customer Advisory](https://docs.microsoft.com/archive/blogs/sqlcat/)
- [Histórias de sucesso de clientes](https://azure.microsoft.com/case-studies/?service=sql-data-warehouse)
- [Fórum do Stack Overflow](https://stackoverflow.com/questions/tagged/azure-sqldw)
- [Twitter](https://twitter.com/hashtag/SQLDW)
- [Vídeos](https://azure.microsoft.com/documentation/videos/index/?services=sql-data-warehouse)
- [Glossário do Azure](../azure-glossary-cloud-terminology.md)
