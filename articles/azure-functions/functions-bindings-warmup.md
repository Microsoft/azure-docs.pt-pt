---
title: Azure Functions gatilho aquecimento
description: Entenda como usar o gatilho aquecimento no Azure Functions.
documentationcenter: na
author: alexkarcher-msft
manager: gwallace
keywords: Azure functions, functions, processamento de eventos, aquecimento, Cold Start, Premium, computa√ß√£o din√¢mica, arquitetura sem servidor
ms.service: azure-functions
ms.topic: reference
ms.date: 11/08/2019
ms.author: alkarche
ms.openlocfilehash: 108294e3f125da9fb009eb0a85585dab026c8d01
ms.sourcegitcommit: 014e916305e0225512f040543366711e466a9495
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 01/14/2020
ms.locfileid: "75933324"
---
# <a name="azure-functions-warm-up-trigger"></a>Azure Functions gatilho de aquecimento

Este artigo explica como trabalhar com o gatilho aquecimento no Azure Functions. O gatilho aquecimento tem suporte apenas para aplicativos de fun√ß√µes em execu√ß√£o em um [plano Premium](functions-premium-plan.md). Um gatilho aquecimento √© invocado quando uma inst√¢ncia √© adicionada para dimensionar um aplicativo de fun√ß√µes em execu√ß√£o. Voc√™ pode usar um gatilho aquecimento para pr√©-carregar depend√™ncias personalizadas durante o [processo de pr√©-teste](./functions-premium-plan.md#pre-warmed-instances) para que suas fun√ß√µes estejam prontas para iniciar solicita√ß√µes de processamento imediatamente. 

[!INCLUDE [intro](../../includes/functions-bindings-intro.md)]

## <a name="packages---functions-2x-and-higher"></a>Pacotes-fun√ß√µes 2. x e superior

O pacote NuGet [Microsoft. Azure. webjobs. Extensions](https://www.nuget.org/packages/Microsoft.Azure.WebJobs.Extensions) , vers√£o **3.0.5 ou superior** , √© necess√°rio. O c√≥digo-fonte do pacote est√° no reposit√≥rio GitHub [Azure-webjobs-SDK-Extensions](https://github.com/Azure/azure-webjobs-sdk-extensions/blob/master/src/WebJobs.Extensions.Http/) . 

[!INCLUDE [functions-package](../../includes/functions-package-auto.md)]

## <a name="trigger"></a>Acionador

O gatilho aquecimento permite que voc√™ defina uma fun√ß√£o que ser√° executada em uma nova inst√¢ncia quando ela for adicionada ao seu aplicativo em execu√ß√£o. Voc√™ pode usar uma fun√ß√£o aquecimento para abrir conex√µes, carregar depend√™ncias ou executar qualquer outra l√≥gica personalizada antes que seu aplicativo comece a receber tr√°fego. 

O gatilho aquecimento destina-se a criar depend√™ncias compartilhadas que ser√£o usadas por outras fun√ß√µes em seu aplicativo. [Veja exemplos de depend√™ncias compartilhadas aqui](./manage-connections.md#client-code-examples).

Observe que o gatilho aquecimento √© chamado apenas durante opera√ß√µes de expans√£o, n√£o durante reinicializa√ß√µes ou outras inicializa√ß√µes sem escala. Voc√™ deve garantir que sua l√≥gica possa carregar todas as depend√™ncias necess√°rias sem usar o gatilho aquecimento. O carregamento lento √© um bom padr√£o para conseguir isso.

## <a name="trigger---example"></a>Acionador - exemplo

# <a name="ctabcsharp"></a>[C#](#tab/csharp)

O exemplo a seguir mostra uma [ C# fun√ß√£o](functions-dotnet-class-library.md) que ser√° executada em cada nova inst√¢ncia quando ela for adicionada ao seu aplicativo. Um atributo de valor de retorno n√£o √© necess√°rio.


* Sua fun√ß√£o deve ser nomeada ```warmup``` (n√£o diferencia mai√∫sculas de min√∫sculas) e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.
* Para usar o aquecimento como uma fun√ß√£o de biblioteca de classes .NET, verifique se voc√™ tem uma refer√™ncia de pacote para **Microsoft. Azure. webjobs. Extensions > = 3.0.5**
    * ```<PackageReference Include="Microsoft.Azure.WebJobs.Extensions" Version="3.0.5" />```


Os coment√°rios de espa√ßo reservado mostram onde o aplicativo deve declarar e inicializar depend√™ncias compartilhadas. 
[Saiba mais sobre depend√™ncias compartilhadas aqui](./manage-connections.md#client-code-examples).

```cs
using Microsoft.Azure.WebJobs;
using Microsoft.Extensions.Logging;
 
namespace WarmupSample
{

    //Declare shared dependencies here

    public static class Warmup
    {
        [FunctionName("Warmup")]
        public static void Run([WarmupTrigger()] WarmupContext context,
            ILogger log)
        {
            //Initialize shared dependencies here
            
            log.LogInformation("Function App instance is warm üåûüåûüåû");
        }
    }
}
```
# <a name="c-scripttabcsharp-script"></a>[C#Prescritiva](#tab/csharp-script)


O exemplo a seguir mostra um gatilho aquecimento em um arquivo *Function. JSON* e uma [ C# fun√ß√£o de script](functions-reference-csharp.md) que ser√° executada em cada nova inst√¢ncia quando ela for adicionada ao seu aplicativo.

Sua fun√ß√£o deve ser nomeada ```warmup``` (n√£o diferencia mai√∫sculas de min√∫sculas) e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.

Aqui est√° o *Function* ficheiro:

```json
{
    "bindings": [
        {
            "type": "warmupTrigger",
            "direction": "in",
            "name": "warmupContext"
        }
    ]
}
```

O [configura√ß√£o](#trigger---configuration) se√ß√£o explica essas propriedades.

Aqui est√° C# o c√≥digo de script que se associa a `HttpRequest`:

```cs
public static void Run(ILogger log)
{
    log.LogInformation("Function App instance is warm üåûüåûüåû");  
}
```

# <a name="javascripttabjavascript"></a>[JavaScript](#tab/javascript)

O exemplo a seguir mostra um gatilho aquecimento em um arquivo *Function. JSON* e uma [fun√ß√£o JavaScript](functions-reference-node.md) que ser√° executada em cada nova inst√¢ncia quando ela for adicionada ao seu aplicativo.

Sua fun√ß√£o deve ser nomeada ```warmup``` (n√£o diferencia mai√∫sculas de min√∫sculas) e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.

Aqui est√° o *Function* ficheiro:

```json
{
    "bindings": [
        {
            "type": "warmupTrigger",
            "direction": "in",
            "name": "warmupContext"
        }
    ]
}
```

O [configura√ß√£o](#trigger---configuration) se√ß√£o explica essas propriedades.

Eis o c√≥digo JavaScript:

```javascript
module.exports = async function (context, warmupContext) {
    context.log('Function App instance is warm üåûüåûüåû');
    context.done();
};
```

# <a name="pythontabpython"></a>[Python](#tab/python)

O exemplo a seguir mostra um gatilho aquecimento em um arquivo *Function. JSON* e uma [fun√ß√£o do Python](functions-reference-python.md) que ser√° executada em cada nova inst√¢ncia quando ela for adicionada ao seu aplicativo.

Sua fun√ß√£o deve ser nomeada ```warmup``` (n√£o diferencia mai√∫sculas de min√∫sculas) e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.

Aqui est√° o *Function* ficheiro:

```json
{
    "bindings": [
        {
            "type": "warmupTrigger",
            "direction": "in",
            "name": "warmupContext"
        }
    ]
}
```

O [configura√ß√£o](#trigger---configuration) se√ß√£o explica essas propriedades.

Este √© o c√≥digo Python:

```python
import logging
import azure.functions as func


def main(warmupContext: func.Context) -> None:
    logging.info('Function App instance is warm üåûüåûüåû')
```

# <a name="javatabjava"></a>[Java](#tab/java)

O exemplo a seguir mostra um gatilho aquecimento em um arquivo *Function. JSON* e em [fun√ß√µes Java](functions-reference-java.md) que ser√£o executadas em cada nova inst√¢ncia quando ela for adicionada ao seu aplicativo.

Sua fun√ß√£o deve ser nomeada ```warmup``` (n√£o diferencia mai√∫sculas de min√∫sculas) e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.

Aqui est√° o *Function* ficheiro:

```json
{
    "bindings": [
        {
            "type": "warmupTrigger",
            "direction": "in",
            "name": "warmupContext"
        }
    ]
}
```

Eis o c√≥digo Java:

```java
@FunctionName("Warmup")
public void run( ExecutionContext context) {
       context.getLogger().info("Function App instance is warm üåûüåûüåû");
}
```

---

## <a name="trigger---attributes"></a>Acionador - atributos

Em [ C# bibliotecas de classes](functions-dotnet-class-library.md), o atributo `WarmupTrigger` est√° dispon√≠vel para configurar a fun√ß√£o.

# <a name="ctabcsharp"></a>[C#](#tab/csharp)

Este exemplo demonstra como usar o atributo [aquecimento](https://github.com/Azure/azure-webjobs-sdk-extensions/blob/dev/src/WebJobs.Extensions/Extensions/Warmup/Trigger/WarmupTriggerAttribute.cs) .

Observe que sua fun√ß√£o deve ser chamada ```Warmup``` e pode haver apenas uma fun√ß√£o aquecimento por aplicativo.

```csharp
 [FunctionName("Warmup")]
        public static void Run(
            [WarmupTrigger()] WarmupContext context, ILogger log)
        {
            ...
        }
```

Para obter um exemplo completo, consulte o [exemplo de gatilho](#trigger---example).

# <a name="c-scripttabcsharp-script"></a>[C#Prescritiva](#tab/csharp-script)

O script n√£o d√° suporte C# a atributos.

# <a name="javascripttabjavascript"></a>[JavaScript](#tab/javascript)

N√£o h√° suporte para atributos pelo JavaScript.

# <a name="pythontabpython"></a>[Python](#tab/python)

N√£o h√° suporte para atributos no Python.

# <a name="javatabjava"></a>[Java](#tab/java)

O gatilho aquecimento n√£o tem suporte em Java como um atributo.

---

## <a name="trigger---configuration"></a>Acionador - configura√ß√£o

A tabela seguinte explica as propriedades de configura√ß√£o de liga√ß√£o definida no *Function* ficheiro e o `WarmupTrigger` atributo.

|propriedade de Function | Propriedade de atributo |Descri√ß√£o|
|---------|---------|----------------------|
| **tipo** | n/d| Obrigat√≥rio-deve ser definido como `warmupTrigger`. |
| **dire√ß√£o** | n/d| Obrigat√≥rio-deve ser definido como `in`. |
| **name** | n/d| Required ‚Äì o nome da vari√°vel usada no c√≥digo de fun√ß√£o.|

## <a name="trigger---usage"></a>Acionador - utiliza√ß√£o

Nenhuma informa√ß√£o adicional √© fornecida a uma fun√ß√£o disparada por aquecimento quando ela √© chamada.

## <a name="trigger---limits"></a>Gatilho-limites

* O gatilho aquecimento s√≥ est√° dispon√≠vel para aplicativos em execu√ß√£o no [plano Premium](./functions-premium-plan.md).
* O gatilho aquecimento √© chamado somente durante opera√ß√µes de escala vertical, n√£o durante reinicializa√ß√µes ou outras inicializa√ß√µes sem escala. Voc√™ deve garantir que sua l√≥gica possa carregar todas as depend√™ncias necess√°rias sem usar o gatilho aquecimento. O carregamento lento √© um bom padr√£o para conseguir isso.
* O gatilho aquecimento n√£o pode ser invocado depois que uma inst√¢ncia j√° est√° em execu√ß√£o.
* S√≥ pode haver uma fun√ß√£o de gatilho aquecimento por aplicativo de fun√ß√£o.

## <a name="next-steps"></a>Passos seguintes

[Saiba mais sobre as fun√ß√µes do Azure acionadores e enlaces](functions-triggers-bindings.md)
